<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
 <script type="text/javascript" src="/js/src/linkcard.js"></script>
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/head.jpg?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/head.jpg?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/head.jpg?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">
  <meta name="google-site-verification" content="ELbK6WK_Oi8CisIxzYbp86oWSo2__-8MbVOmWyGpgRI">
  <meta name="baidu-site-verification" content="xwPujxAXwa">

<link rel="stylesheet" href="/css/main18.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Noto Serif SC Black:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.css">
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css?v=1.0.2">





<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":true},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    save_scroll: true,
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: 'IXLMLOF7V1',
      apiKey: 'f824dc3a782d076ff5a1670039edcf79',
      indexName: 'search',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"我们没有找到任何搜索结果: ${query}","hits_stats":"找到约 ${hits} 条结果，用时 ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>



  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "be6d4aef"
    });
  daovoice('update');
  </script>

  <meta name="description" content="接续">
<meta name="keywords" content="pandas,Editor,DataMining,Tianchi,Study,Jupyter,seaborn,Onehot,BoxPlot,IQR,groupby,过滤式(filter),包裹式(wrapper),嵌入式（embedding）">
<meta property="og:type" content="article">
<meta property="og:title" content="天池_二手车价格预测_Task_3_特征工程">
<meta property="og:url" content="https://kemo.xyz/天池-二手车价格预测-Task-3-特征工程.html">
<meta property="og:site_name" content="柯摩的BLOG">
<meta property="og:description" content="接续">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004507865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402005242590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004441943.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004634297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004549377.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004706243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004719447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004913553.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004748777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004923471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004945672.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402004956905.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402005026878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200402005051474.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:updated_time" content="2020-05-12T19:21:21.595Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="天池_二手车价格预测_Task_3_特征工程">
<meta name="twitter:description" content="接续">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200402004507865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
  <link rel="alternate" href="/atom.xml" title="柯摩的BLOG" type="application/atom+xml">
  <link rel="canonical" href="https://kemo.xyz/天池-二手车价格预测-Task-3-特征工程">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>天池_二手车价格预测_Task_3_特征工程 | 柯摩的BLOG</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145155839-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-145155839-1');
    }
  </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?43fd6fab7512d8897b8d9cf67c49b600";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
<link type='text/css' rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" media='all'/>
<link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">柯摩的BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">Forget before get.</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-人生小记">
      
    
      
    

    <a href="/人生小记/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>人生小记</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">95</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">9</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">26</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-运动日记">
      
    
      
    

    <a href="/sports/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i> <br>运动日记</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-相册">
      
    
      
    

    <a href="/photos/" rel="section"><i class="menu-item-icon fa fa-fw fa-photo"></i> <br>相册</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-热门">
      
    
      
    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-fire"></i> <br>热门</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-友链">
      
    
      
    

    <a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-users"></i> <br>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

    

    <div class="site-search">
      
  <div class="algolia-popup popup search-popup">
  <div class="algolia-search">
    <div class="algolia-search-input-icon">
      <i class="fa fa-search"></i>
    </div>
    <div class="algolia-search-input" id="algolia-search-input"></div>
  </div>

  <div class="algolia-results">
    <div id="algolia-stats"></div>
    <div id="algolia-hits"></div>
    <div id="algolia-pagination" class="algolia-pagination"></div>
  </div>

  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>



    </div>
</nav>

<!-- 打字礼花及震动特效 -->
<script type="text/javascript" src="https://blog-1259799643.cos.ap-shanghai.myqcloud.com/fire.js"></script>
<script>
  POWERMODE.colorful = true; // ture 为启用礼花特效
  POWERMODE.shake = true; // false 为禁用震动特效
  document.body.addEventListener('input', POWERMODE);
</script>
</div>
    </header>

    

  <a href="https://github.com/ExcaliburEX" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    
    <div class="reading-progress-bar"></div>



  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  

  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kemo.xyz/天池-二手车价格预测-Task-3-特征工程.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柯摩">
      <meta itemprop="description" content="真实自有万钧之力">
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="柯摩的BLOG">
    </span>
      <header class="post-header">

        
          <h2 class="post-title" itemprop="name headline">天池_二手车价格预测_Task_3_特征工程

            
          </h2>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-04-02 14:56:56" itemprop="dateCreated datePublished" datetime="2020-04-02T14:56:56+08:00">2020-04-02</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-13 03:21:21" itemprop="dateModified" datetime="2020-05-13T03:21:21+08:00">2020-05-13</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            <span id="/天池-二手车价格预测-Task-3-特征工程.html" class="post-meta-item leancloud_visitors" data-flag-title="天池_二手车价格预测_Task_3_特征工程" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
          
            <span class="post-meta-item" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
            <span class="post-meta-divider">|</span>
          <span title="post.wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span>字数： 7.2k</span>
          
            
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="fa fa-comment-o"></i>
    </span>
    <span class="post-meta-item-text">评论数：</span>
  
    <a href="/天池-二手车价格预测-Task-3-特征工程.html#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/天池-二手车价格预测-Task-3-特征工程.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
          
          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span>34k</span>
            </span>
          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span>31 分钟</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>接续<br><a id="more"></a></p>
<h1 id="特征工程🃏"><a href="#特征工程🃏" class="headerlink" title="特征工程🃏"></a>特征工程🃏</h1><p>  特征工程，是指用一系列工程化的方式从原始数据中筛选出更好的数据特征，以提升模型的训练效果。业内有一句广为流传的话是：数据和特征决定了机器学习的上限，而模型和算法是在逼近这个上限而已。由此可见，好的数据和特征是模型和算法发挥更大的作用的前提。特征工程通常包括数据预处理、特征选择、降维等环节。如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200402004507865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="0️⃣-前言"><a href="#0️⃣-前言" class="headerlink" title="0️⃣ 前言"></a>0️⃣ 前言</h2><p>  我们经常在处理数据时，会面临以下问题：</p>
<ul>
<li>收集的数据格式不对（如 <code>SQL</code> 数据库、<code>JSON</code>、<code>CSV</code> 等）</li>
<li>缺失值和异常值</li>
<li>标准化</li>
<li>减少数据集中存在的固有噪声（部分存储数据可能已损坏）</li>
<li>数据集中的某些功能可能无法收集任何信息以供分析</li>
</ul>
<p>而减少统计分析期间要使用的特征的数量可能会带来一些好处，例如：</p>
<ul>
<li>提高精度</li>
<li>降低过拟合风险</li>
<li>加快训练速度</li>
<li>改进数据可视化</li>
<li>增加我们模型的可解释性</li>
</ul>
<p>事实上，统计上证明，当执行机器学习任务时，存在针对每个特定任务应该使用的<strong>最佳数量的特征</strong>（图 1）。如果添加的特征比必要的特征<strong>多</strong>，那么我们的模型性能将<strong>下降</strong>（因为添加了噪声）。真正的挑战是找出哪些特征是<strong>最佳的使用特征</strong>（这实际上取决于我们提供的数据量和我们正在努力实现的任务的复杂性）。这就是特征选择技术能够帮到我们的地方！</p>
<p><img src="https://img-blog.csdnimg.cn/20200402005242590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="0️⃣-1️⃣-赛题重述"><a href="#0️⃣-1️⃣-赛题重述" class="headerlink" title="0️⃣.1️⃣ 赛题重述"></a>0️⃣.1️⃣ 赛题重述</h3><p>  这是一道来自于天池的新手练习题目，用<code>数据分析</code>、<code>机器学习</code>等手段进行 <a href="https://tianchi.aliyun.com/competition/entrance/231784/information" target="_blank" rel="noopener">二手车售卖价格预测</a> 的回归问题。赛题本身的思路清晰明了，即对给定的数据集进行分析探讨，然后设计模型运用数据进行训练，测试模型，最终给出选手的预测结果。前面我们已经进行过EDA分析在这里<a href="https://blog.csdn.net/ExcaliburUlimited/article/details/105021630" target="_blank" rel="noopener">天池_二手车价格预测_Task1-2_赛题理解与数据分析
</a></p>
<h3 id="0️⃣-2️⃣-数据集概述"><a href="#0️⃣-2️⃣-数据集概述" class="headerlink" title="0️⃣.2️⃣ 数据集概述"></a>0️⃣.2️⃣ 数据集概述</h3><p>  赛题官方给出了来自Ebay Kleinanzeigen的二手车交易记录，总数据量超过<strong>40w</strong>，包含<strong>31列</strong>变量信息，其中<strong>15列</strong>为匿名变量，即<code>v0</code>至<code>v15</code>。并从中抽取<strong>15万条</strong>作为训练集，<strong>5万</strong>条作为测试集A，<strong>5万</strong>条作为测试集B，同时对<code>name</code>、<code>model</code>、<code>brand</code>和<code>regionCode</code>等信息进行脱敏。具体的数据表如下图：</p>
<div class="table-wrapper" style="center"><table style="center">
<thead>
<tr style="center">
<th><strong>Field</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody style="center">
<tr style="center">
<td>SaleID</td>
<td>交易ID，唯一编码</td>
</tr>
<tr>
<td>name</td>
<td>汽车交易名称，已脱敏</td>
</tr>
<tr>
<td>regDate</td>
<td>汽车注册日期，例如20160101，2016年01月01日</td>
</tr>
<tr>
<td>model</td>
<td>车型编码，已脱敏</td>
</tr>
<tr>
<td>brand</td>
<td>汽车品牌，已脱敏</td>
</tr>
<tr>
<td>bodyType</td>
<td>车身类型：豪华轿车：0，微型车：1，厢型车：2，大巴车：3，敞篷车：4，双门汽车：5，商务车：6，搅拌车：7</td>
</tr>
<tr>
<td>fuelType</td>
<td>燃油类型：汽油：0，柴油：1，液化石油气：2，天然气：3，混合动力：4，其他：5，电动：6</td>
</tr>
<tr>
<td>gearbox</td>
<td>变速箱：手动：0，自动：1</td>
</tr>
<tr>
<td>power</td>
<td>发动机功率：范围 [ 0,  600 ]</td>
</tr>
<tr>
<td>kilometer</td>
<td>汽车已行驶公里，单位万km</td>
</tr>
<tr>
<td>notRepairedDamage</td>
<td>汽车有尚未修复的损坏：是：0，否：1</td>
</tr>
<tr>
<td>regionCode</td>
<td>地区编码，已脱敏</td>
</tr>
<tr>
<td>seller</td>
<td>销售方：个体：0，非个体：1</td>
</tr>
<tr>
<td>offerType</td>
<td>报价类型：提供：0，请求：1</td>
</tr>
<tr>
<td>creatDate</td>
<td>汽车上线时间，即开始售卖时间</td>
</tr>
<tr>
<td>price</td>
<td>二手车交易价格（预测目标）</td>
</tr>
<tr>
<td>v系列特征</td>
<td>匿名特征，包含v0-14在内15个匿名特征</td>
</tr>
</tbody>
</table>
</div>

<h2 id="1️⃣-异常缺失值删除"><a href="#1️⃣-异常缺失值删除" class="headerlink" title="1️⃣ 异常缺失值删除"></a>1️⃣ 异常缺失值删除</h2><h3 id="1️⃣-1️⃣-导入库与数据"><a href="#1️⃣-1️⃣-导入库与数据" class="headerlink" title="1️⃣.1️⃣  导入库与数据"></a>1️⃣.1️⃣  导入库与数据</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train = pd.read_csv(<span class="string">'used_car_train_20200313.csv'</span>, sep=<span class="string">' '</span>)</span><br><span class="line">test = pd.read_csv(<span class="string">'used_car_testA_20200313.csv'</span>, sep=<span class="string">' '</span>)</span><br><span class="line">print(train.shape)</span><br><span class="line">print(test.shape)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(150000, 31)
(50000, 30)
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.head()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>regDate</th>
      <th>model</th>
      <th>brand</th>
      <th>bodyType</th>
      <th>fuelType</th>
      <th>gearbox</th>
      <th>power</th>
      <th>kilometer</th>
      <th>...</th>
      <th>v_5</th>
      <th>v_6</th>
      <th>v_7</th>
      <th>v_8</th>
      <th>v_9</th>
      <th>v_10</th>
      <th>v_11</th>
      <th>v_12</th>
      <th>v_13</th>
      <th>v_14</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>736</td>
      <td>20040402</td>
      <td>30.0</td>
      <td>6</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>60</td>
      <td>12.5</td>
      <td>...</td>
      <td>0.235676</td>
      <td>0.101988</td>
      <td>0.129549</td>
      <td>0.022816</td>
      <td>0.097462</td>
      <td>-2.881803</td>
      <td>2.804097</td>
      <td>-2.420821</td>
      <td>0.795292</td>
      <td>0.914762</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>2262</td>
      <td>20030301</td>
      <td>40.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.264777</td>
      <td>0.121004</td>
      <td>0.135731</td>
      <td>0.026597</td>
      <td>0.020582</td>
      <td>-4.900482</td>
      <td>2.096338</td>
      <td>-1.030483</td>
      <td>-1.722674</td>
      <td>0.245522</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2</td>
      <td>14874</td>
      <td>20040403</td>
      <td>115.0</td>
      <td>15</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>163</td>
      <td>12.5</td>
      <td>...</td>
      <td>0.251410</td>
      <td>0.114912</td>
      <td>0.165147</td>
      <td>0.062173</td>
      <td>0.027075</td>
      <td>-4.846749</td>
      <td>1.803559</td>
      <td>1.565330</td>
      <td>-0.832687</td>
      <td>-0.229963</td>
    </tr>
    <tr>
      <td>3</td>
      <td>3</td>
      <td>71865</td>
      <td>19960908</td>
      <td>109.0</td>
      <td>10</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>193</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.274293</td>
      <td>0.110300</td>
      <td>0.121964</td>
      <td>0.033395</td>
      <td>0.000000</td>
      <td>-4.509599</td>
      <td>1.285940</td>
      <td>-0.501868</td>
      <td>-2.438353</td>
      <td>-0.478699</td>
    </tr>
    <tr>
      <td>4</td>
      <td>4</td>
      <td>111080</td>
      <td>20120103</td>
      <td>110.0</td>
      <td>5</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>68</td>
      <td>5.0</td>
      <td>...</td>
      <td>0.228036</td>
      <td>0.073205</td>
      <td>0.091880</td>
      <td>0.078819</td>
      <td>0.121534</td>
      <td>-1.896240</td>
      <td>0.910783</td>
      <td>0.931110</td>
      <td>2.834518</td>
      <td>1.923482</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 31 columns</p>
</div>




<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.columns</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Index(['SaleID', 'name', 'regDate', 'model', 'brand', 'bodyType', 'fuelType',
       'gearbox', 'power', 'kilometer', 'notRepairedDamage', 'regionCode',
       'seller', 'offerType', 'creatDate', 'price', 'v_0', 'v_1', 'v_2', 'v_3',
       'v_4', 'v_5', 'v_6', 'v_7', 'v_8', 'v_9', 'v_10', 'v_11', 'v_12',
       'v_13', 'v_14'],
      dtype='object')
</code></pre><h3 id="1️⃣-2️⃣-异常值删除"><a href="#1️⃣-2️⃣-异常值删除" class="headerlink" title="1️⃣.2️⃣  异常值删除"></a>1️⃣.2️⃣  异常值删除</h3><p>  这里可以将箱型图中的超过上下限的那些值作为异常值删除。如下图所示，箱型图中间是一个箱体，也就是粉红色部分，箱体左边，中间，右边分别有一条线，左边是下分位数($Q1$)，右边是上四分位数($Q3$)，中间是中位数($Median$)，上下四分位数之差是四分位距$IQR（Interquartile Range$，用$Q1-1.5<em>IQR$得到下边缘（最小值），$Q3+1.5</em>IQR$得到上边缘（最大值）。在上边缘之外的数据就是极大异常值，在下边缘之外的数据就是极小异常值。<br><img src="https://img-blog.csdnimg.cn/20200402004441943.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>搞清楚原理那我们就构造一个实现上述功能的函数吧！</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_outliers</span><span class="params">(data, col_name, scale = <span class="number">1.5</span>)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    用于清洗异常值，默认用 box_plot（scale=1.5）进行清洗</span></span><br><span class="line"><span class="string">    :param data: 接收 pandas 数据格式</span></span><br><span class="line"><span class="string">    :param col_name: pandas 列名</span></span><br><span class="line"><span class="string">    :param scale: 尺度</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    data_n = data.copy()</span><br><span class="line">    data_series = data_n[col_name]</span><br><span class="line">    </span><br><span class="line">    IQR = scale * (data_series.quantile(<span class="number">0.75</span>) - data_series.quantile(<span class="number">0.25</span>)) <span class="comment"># quantile是pd内置的求四分位的函数</span></span><br><span class="line">    val_low = data_series.quantile(<span class="number">0.25</span>) - IQR <span class="comment"># 下边缘</span></span><br><span class="line">    val_up = data_series.quantile(<span class="number">0.75</span>) + IQR <span class="comment"># 上边缘</span></span><br><span class="line">    rule_low = (data_series < val_low) <span class="comment"># 下边缘的极小异常值的下标列表</span></span><br><span class="line">    rule_up = (data_series > val_up)   <span class="comment"># 上边缘的极大异常值的下标列表</span></span><br><span class="line">    </span><br><span class="line">    index = np.arange(data_series.shape[<span class="number">0</span>])[rule_low | rule_up] <span class="comment"># | 运算就是说只要rule_low和rule_up中只要有一个值为True，就把这个下标取出来</span></span><br><span class="line">    print(index)</span><br><span class="line">    print(<span class="string">"Delete number is: {}"</span>.format(len(index)))</span><br><span class="line">    </span><br><span class="line">    data_n = data_n.drop(index) <span class="comment"># 删除index对应下标的元素</span></span><br><span class="line">    data_n.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>) <span class="comment">#下文有介绍</span></span><br><span class="line">    print(<span class="string">"Now column number is: {}"</span>.format(data_n.shape[<span class="number">0</span>]))</span><br><span class="line">    </span><br><span class="line">    index_low = np.arange(data_series.shape[<span class="number">0</span>])[rule_low] <span class="comment"># 下边缘的异常数据的描述统计量</span></span><br><span class="line">    outliers = data_series.iloc[index_low]</span><br><span class="line">    print(<span class="string">"Description of data less than the lower bound is:"</span>)</span><br><span class="line">    print(pd.Series(outliers).describe())</span><br><span class="line">    </span><br><span class="line">    index_up = np.arange(data_series.shape[<span class="number">0</span>])[rule_up] <span class="comment"># 上边缘的异常数据的描述统计量</span></span><br><span class="line">    outliers = data_series.iloc[index_up]</span><br><span class="line">    print(<span class="string">"Description of data larger than the upper bound is:"</span>)</span><br><span class="line">    print(pd.Series(outliers).describe())</span><br><span class="line">    </span><br><span class="line">    fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize = (<span class="number">10</span>, <span class="number">7</span>))</span><br><span class="line">    sns.boxplot(y = data[col_name], data = data, palette = <span class="string">"Set1"</span>, ax = ax[<span class="number">0</span>])</span><br><span class="line">    sns.boxplot(y = data_n[col_name], data = data_n, palette = <span class="string">"Set1"</span>, ax = ax[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> data_n</span><br></pre></td></tr></tbody></table></figure>
<p>这里<code>reset_index</code>可以还原索引，重新变为默认的整型索引 </p>
<p><code>DataFrame.reset_index(level=None, drop=False, inplace=False, col_level=0, col_fill=”)</code></p>
<ul>
<li><code>level</code>：<code>int</code>、<code>str</code>、<code>tuple</code>或<code>list</code>，默认无，仅从索引中删除给定级别。默认情况下移除所有级别。控制了具体要还原的那个等级的索引</li>
<li><code>drop</code>：<code>drop</code>为<code>False</code>则索引列会被还原为普通列，否则会丢失</li>
<li><code>inplace</code>：默认为<code>False</code>，适当修改<code>DataFrame</code>(不要创建新对象)</li>
<li><code>col_level</code>：<code>int</code>或<code>str</code>，默认值为0，如果列有多个级别，则确定将标签插入到哪个级别。默认情况下，它将插入到第一级。</li>
<li><code>col_fill</code>：对象，默认‘’，如果列有多个级别，则确定其他级别的命名方式。如果没有，则重复索引名</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop_outliers(train, <span class="string">'power'</span>, scale=<span class="number">1.5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[    33     77    104 ... 149967 149981 149984]
Delete number is: 4878
Now column number is: 145122
Description of data less than the lower bound is:
count    0.0
mean     NaN
std      NaN
min      NaN
25%      NaN
50%      NaN
75%      NaN
max      NaN
Name: power, dtype: float64
Description of data larger than the upper bound is:
count     4878.000000
mean       410.132021
std        884.219933
min        264.000000
25%        286.000000
50%        306.000000
75%        349.000000
max      19312.000000
Name: power, dtype: float64
</code></pre><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>regDate</th>
      <th>model</th>
      <th>brand</th>
      <th>bodyType</th>
      <th>fuelType</th>
      <th>gearbox</th>
      <th>power</th>
      <th>kilometer</th>
      <th>...</th>
      <th>v_5</th>
      <th>v_6</th>
      <th>v_7</th>
      <th>v_8</th>
      <th>v_9</th>
      <th>v_10</th>
      <th>v_11</th>
      <th>v_12</th>
      <th>v_13</th>
      <th>v_14</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>736</td>
      <td>20040402</td>
      <td>30.0</td>
      <td>6</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>60</td>
      <td>12.5</td>
      <td>...</td>
      <td>0.235676</td>
      <td>0.101988</td>
      <td>0.129549</td>
      <td>0.022816</td>
      <td>0.097462</td>
      <td>-2.881803</td>
      <td>2.804097</td>
      <td>-2.420821</td>
      <td>0.795292</td>
      <td>0.914762</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>2262</td>
      <td>20030301</td>
      <td>40.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.264777</td>
      <td>0.121004</td>
      <td>0.135731</td>
      <td>0.026597</td>
      <td>0.020582</td>
      <td>-4.900482</td>
      <td>2.096338</td>
      <td>-1.030483</td>
      <td>-1.722674</td>
      <td>0.245522</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2</td>
      <td>14874</td>
      <td>20040403</td>
      <td>115.0</td>
      <td>15</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>163</td>
      <td>12.5</td>
      <td>...</td>
      <td>0.251410</td>
      <td>0.114912</td>
      <td>0.165147</td>
      <td>0.062173</td>
      <td>0.027075</td>
      <td>-4.846749</td>
      <td>1.803559</td>
      <td>1.565330</td>
      <td>-0.832687</td>
      <td>-0.229963</td>
    </tr>
    <tr>
      <td>3</td>
      <td>3</td>
      <td>71865</td>
      <td>19960908</td>
      <td>109.0</td>
      <td>10</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>193</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.274293</td>
      <td>0.110300</td>
      <td>0.121964</td>
      <td>0.033395</td>
      <td>0.000000</td>
      <td>-4.509599</td>
      <td>1.285940</td>
      <td>-0.501868</td>
      <td>-2.438353</td>
      <td>-0.478699</td>
    </tr>
    <tr>
      <td>4</td>
      <td>4</td>
      <td>111080</td>
      <td>20120103</td>
      <td>110.0</td>
      <td>5</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>68</td>
      <td>5.0</td>
      <td>...</td>
      <td>0.228036</td>
      <td>0.073205</td>
      <td>0.091880</td>
      <td>0.078819</td>
      <td>0.121534</td>
      <td>-1.896240</td>
      <td>0.910783</td>
      <td>0.931110</td>
      <td>2.834518</td>
      <td>1.923482</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>145117</td>
      <td>149995</td>
      <td>163978</td>
      <td>20000607</td>
      <td>121.0</td>
      <td>10</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>163</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.280264</td>
      <td>0.000310</td>
      <td>0.048441</td>
      <td>0.071158</td>
      <td>0.019174</td>
      <td>1.988114</td>
      <td>-2.983973</td>
      <td>0.589167</td>
      <td>-1.304370</td>
      <td>-0.302592</td>
    </tr>
    <tr>
      <td>145118</td>
      <td>149996</td>
      <td>184535</td>
      <td>20091102</td>
      <td>116.0</td>
      <td>11</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>125</td>
      <td>10.0</td>
      <td>...</td>
      <td>0.253217</td>
      <td>0.000777</td>
      <td>0.084079</td>
      <td>0.099681</td>
      <td>0.079371</td>
      <td>1.839166</td>
      <td>-2.774615</td>
      <td>2.553994</td>
      <td>0.924196</td>
      <td>-0.272160</td>
    </tr>
    <tr>
      <td>145119</td>
      <td>149997</td>
      <td>147587</td>
      <td>20101003</td>
      <td>60.0</td>
      <td>11</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>90</td>
      <td>6.0</td>
      <td>...</td>
      <td>0.233353</td>
      <td>0.000705</td>
      <td>0.118872</td>
      <td>0.100118</td>
      <td>0.097914</td>
      <td>2.439812</td>
      <td>-1.630677</td>
      <td>2.290197</td>
      <td>1.891922</td>
      <td>0.414931</td>
    </tr>
    <tr>
      <td>145120</td>
      <td>149998</td>
      <td>45907</td>
      <td>20060312</td>
      <td>34.0</td>
      <td>10</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>156</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.256369</td>
      <td>0.000252</td>
      <td>0.081479</td>
      <td>0.083558</td>
      <td>0.081498</td>
      <td>2.075380</td>
      <td>-2.633719</td>
      <td>1.414937</td>
      <td>0.431981</td>
      <td>-1.659014</td>
    </tr>
    <tr>
      <td>145121</td>
      <td>149999</td>
      <td>177672</td>
      <td>19990204</td>
      <td>19.0</td>
      <td>28</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>193</td>
      <td>12.5</td>
      <td>...</td>
      <td>0.284475</td>
      <td>0.000000</td>
      <td>0.040072</td>
      <td>0.062543</td>
      <td>0.025819</td>
      <td>1.978453</td>
      <td>-3.179913</td>
      <td>0.031724</td>
      <td>-1.483350</td>
      <td>-0.342674</td>
    </tr>
  </tbody>
</table>
<p>145122 rows × 31 columns</p>
</div>



<p><img src="https://img-blog.csdnimg.cn/20200402004634297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>从这张删除异常值前后的箱型图对比可以看出，剔除异常值后，数据的分布就很均匀了。</p>
<p>下面我们就批量对所有的特征进行一次异常数据删除：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Bach_drop_outliers</span><span class="params">(data,scale=<span class="number">1.5</span>)</span>:</span></span><br><span class="line">    dataNew = data.copy()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> fea <span class="keyword">in</span> data.columns:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            IQR = scale * (dataNew[fea].quantile(<span class="number">0.75</span>) - dataNew[fea].quantile(<span class="number">0.25</span>)) <span class="comment"># quantile是pd内置的求四分位的函数</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        val_low = dataNew[fea].quantile(<span class="number">0.25</span>) - IQR <span class="comment"># 下边缘</span></span><br><span class="line">        val_up = dataNew[fea].quantile(<span class="number">0.75</span>) + IQR <span class="comment"># 上边缘</span></span><br><span class="line">        rule_low = (dataNew[fea] < val_low) <span class="comment"># 下边缘的极小异常值的下标列表</span></span><br><span class="line">        rule_up = (dataNew[fea] > val_up)   <span class="comment"># 上边缘的极大异常值的下标列表</span></span><br><span class="line">        </span><br><span class="line">        index = np.arange(dataNew[fea].shape[<span class="number">0</span>])[rule_low | rule_up] <span class="comment"># | 运算就是说只要rule_low和rule_up中只要有一个值为True，就把这个下标取出来</span></span><br><span class="line">        print(<span class="string">"feature %s deleted number is %d"</span>%(fea, len(index)))</span><br><span class="line">        </span><br><span class="line">        dataNew = dataNew.drop(index)<span class="comment"># 删除index对应下标的元素</span></span><br><span class="line">        dataNew.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    fig, ax = plt.subplots(<span class="number">5</span>, <span class="number">6</span>, figsize = (<span class="number">20</span>, <span class="number">15</span>))</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    y = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> fea <span class="keyword">in</span> dataNew.columns:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            sns.boxplot(y = dataNew[fea], data =dataNew, palette = <span class="string">"Set2"</span>, ax = ax[x][y])</span><br><span class="line">            y+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> y == <span class="number">6</span>:</span><br><span class="line">                y = <span class="number">0</span></span><br><span class="line">                x += <span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(fea)</span><br><span class="line">            y+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> y == <span class="number">6</span>:</span><br><span class="line">                y = <span class="number">0</span></span><br><span class="line">                x += <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">return</span> dataNew</span><br><span class="line"></span><br><span class="line">train = Bach_drop_outliers(train)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>feature SaleID deleted number is 0
feature name deleted number is 0
feature regDate deleted number is 0
feature model deleted number is 9720
feature brand deleted number is 4032
feature bodyType deleted number is 5458
feature fuelType deleted number is 333
feature gearbox deleted number is 26829
feature power deleted number is 1506
feature kilometer deleted number is 15306
feature regionCode deleted number is 4
feature seller deleted number is 1
feature offerType deleted number is 0
feature creatDate deleted number is 13989
feature price deleted number is 4527
feature v_0 deleted number is 2558
feature v_1 deleted number is 0
feature v_2 deleted number is 487
feature v_3 deleted number is 173
feature v_4 deleted number is 61
feature v_5 deleted number is 0
feature v_6 deleted number is 0
feature v_7 deleted number is 64
feature v_8 deleted number is 0
feature v_9 deleted number is 24
feature v_10 deleted number is 0
feature v_11 deleted number is 0
feature v_12 deleted number is 4
feature v_13 deleted number is 0
feature v_14 deleted number is 1944
notRepairedDamage
v_14
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004549377.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>可以看出，经过箱型图异常值删除后，新数据的箱型图的数据几乎没有异常值了，甚至有些箱型图的数据是一条直线，当然那是因为数据本身就是种类非0即1。</p>
<h2 id="2️⃣-树模型的特征构造"><a href="#2️⃣-树模型的特征构造" class="headerlink" title="2️⃣ 树模型的特征构造"></a>2️⃣ 树模型的特征构造</h2><p>  训练集和测试集放在一起，方便构造特征</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train[<span class="string">'train'</span>] = <span class="number">1</span></span><br><span class="line">test[<span class="string">'train'</span>] = <span class="number">0</span></span><br><span class="line">data = pd.concat([train, test], ignore_index=<span class="literal">True</span>, sort=<span class="literal">False</span>)</span><br><span class="line">data</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>regDate</th>
      <th>model</th>
      <th>brand</th>
      <th>bodyType</th>
      <th>fuelType</th>
      <th>gearbox</th>
      <th>power</th>
      <th>kilometer</th>
      <th>...</th>
      <th>v_6</th>
      <th>v_7</th>
      <th>v_8</th>
      <th>v_9</th>
      <th>v_10</th>
      <th>v_11</th>
      <th>v_12</th>
      <th>v_13</th>
      <th>v_14</th>
      <th>train</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>2262</td>
      <td>20030301</td>
      <td>40.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.121004</td>
      <td>0.135731</td>
      <td>0.026597</td>
      <td>0.020582</td>
      <td>-4.900482</td>
      <td>2.096338</td>
      <td>-1.030483</td>
      <td>-1.722674</td>
      <td>0.245522</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>5</td>
      <td>137642</td>
      <td>20090602</td>
      <td>24.0</td>
      <td>10</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>109</td>
      <td>10.0</td>
      <td>...</td>
      <td>0.000518</td>
      <td>0.119838</td>
      <td>0.090922</td>
      <td>0.048769</td>
      <td>1.885526</td>
      <td>-2.721943</td>
      <td>2.457660</td>
      <td>-0.286973</td>
      <td>0.206573</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>7</td>
      <td>165346</td>
      <td>19990706</td>
      <td>26.0</td>
      <td>14</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>101</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.122943</td>
      <td>0.039839</td>
      <td>0.082413</td>
      <td>3.693829</td>
      <td>-0.245014</td>
      <td>-2.192810</td>
      <td>0.236728</td>
      <td>0.195567</td>
      <td>1</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10</td>
      <td>18961</td>
      <td>20050811</td>
      <td>19.0</td>
      <td>9</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>101</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.105385</td>
      <td>0.077271</td>
      <td>0.042445</td>
      <td>0.060794</td>
      <td>-4.206000</td>
      <td>1.060391</td>
      <td>-0.647515</td>
      <td>-0.191194</td>
      <td>0.349187</td>
      <td>1</td>
    </tr>
    <tr>
      <td>4</td>
      <td>13</td>
      <td>8129</td>
      <td>20041110</td>
      <td>65.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>150</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.106950</td>
      <td>0.134945</td>
      <td>0.050364</td>
      <td>0.051359</td>
      <td>-4.614692</td>
      <td>0.821889</td>
      <td>0.753490</td>
      <td>-0.886425</td>
      <td>-0.341562</td>
      <td>1</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>112975</td>
      <td>199995</td>
      <td>20903</td>
      <td>19960503</td>
      <td>4.0</td>
      <td>4</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>116</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.130044</td>
      <td>0.049833</td>
      <td>0.028807</td>
      <td>0.004616</td>
      <td>-5.978511</td>
      <td>1.303174</td>
      <td>-1.207191</td>
      <td>-1.981240</td>
      <td>-0.357695</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112976</td>
      <td>199996</td>
      <td>708</td>
      <td>19991011</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>75</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.108095</td>
      <td>0.066039</td>
      <td>0.025468</td>
      <td>0.025971</td>
      <td>-3.913825</td>
      <td>1.759524</td>
      <td>-2.075658</td>
      <td>-1.154847</td>
      <td>0.169073</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112977</td>
      <td>199997</td>
      <td>6693</td>
      <td>20040412</td>
      <td>49.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>224</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.105724</td>
      <td>0.117652</td>
      <td>0.057479</td>
      <td>0.015669</td>
      <td>-4.639065</td>
      <td>0.654713</td>
      <td>1.137756</td>
      <td>-1.390531</td>
      <td>0.254420</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112978</td>
      <td>199998</td>
      <td>96900</td>
      <td>20020008</td>
      <td>27.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>334</td>
      <td>15.0</td>
      <td>...</td>
      <td>0.000490</td>
      <td>0.137366</td>
      <td>0.086216</td>
      <td>0.051383</td>
      <td>1.833504</td>
      <td>-2.828687</td>
      <td>2.465630</td>
      <td>-0.911682</td>
      <td>-2.057353</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112979</td>
      <td>199999</td>
      <td>193384</td>
      <td>20041109</td>
      <td>166.0</td>
      <td>6</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>68</td>
      <td>9.0</td>
      <td>...</td>
      <td>0.000300</td>
      <td>0.103534</td>
      <td>0.080625</td>
      <td>0.124264</td>
      <td>2.914571</td>
      <td>-1.135270</td>
      <td>0.547628</td>
      <td>2.094057</td>
      <td>-1.552150</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>112980 rows × 32 columns</p>
</div>



<h3 id="2️⃣-1️⃣-时间特征构造"><a href="#2️⃣-1️⃣-时间特征构造" class="headerlink" title="2️⃣.1️⃣ 时间特征构造"></a>2️⃣.1️⃣ 时间特征构造</h3><ul>
<li>使用时间：<code>data['creatDate']</code> - <code>data['regDate']</code>，反应汽车使用时间，一般来说价格与使用时间成反比</li>
<li>不过要注意，数据里有时间出错的格式，所以我们需要 errors=’coerce’</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'used_time'</span>] = (pd.to_datetime(data[<span class="string">'creatDate'</span>], format=<span class="string">'%Y%m%d'</span>, errors=<span class="string">'coerce'</span>) - </span><br><span class="line">                            pd.to_datetime(data[<span class="string">'regDate'</span>], format=<span class="string">'%Y%m%d'</span>, errors=<span class="string">'coerce'</span>)).dt.days</span><br><span class="line">data[<span class="string">'used_time'</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0         4757.0
1         2482.0
2         6108.0
3         3874.0
4         4154.0
           ...  
112975    7261.0
112976    6014.0
112977    4345.0
112978       NaN
112979    4151.0
Name: used_time, Length: 112980, dtype: float64
</code></pre><ul>
<li>看一下空数据，有 7.6k 个样本的时间是有问题的，我们可以选择删除，也可以选择放着。</li>
<li>但是这里不建议删除，因为删除缺失数据占总样本量过大，3.8%</li>
<li>我们可以先放着，因为如果我们 XGBoost 之类的决策树，其本身就能处理缺失值，所以可以不用管；</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'used_time'</span>].isnull().sum()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>8591
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.isnull().sum().sum()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>70585
</code></pre><h3 id="2️⃣-2️⃣-城市信息特征提取"><a href="#2️⃣-2️⃣-城市信息特征提取" class="headerlink" title="2️⃣.2️⃣ 城市信息特征提取"></a>2️⃣.2️⃣ 城市信息特征提取</h3><ul>
<li>从邮编中提取城市信息，因为是德国的数据，所以参考德国的邮编，相当于加入了先验知识</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'city'</span>] = data[<span class="string">'regionCode'</span>].apply(<span class="keyword">lambda</span> x : str(x)[:<span class="number">-3</span>])</span><br><span class="line">data[<span class="string">'city'</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0         4
1         3
2         4
3         1
4         3
         ..
112975    3
112976    1
112977    3
112978    1
112979    3
Name: city, Length: 112980, dtype: object
</code></pre><h3 id="2️⃣-3️⃣-品牌特征提取"><a href="#2️⃣-3️⃣-品牌特征提取" class="headerlink" title="2️⃣.3️⃣ 品牌特征提取"></a>2️⃣.3️⃣ 品牌特征提取</h3><p>  计算某品牌的销售统计量，这里要以 train 的数据计算统计量。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">train_gb = train.groupby(<span class="string">"brand"</span>)</span><br><span class="line">all_info = {}</span><br><span class="line"><span class="keyword">for</span> kind, kind_data <span class="keyword">in</span> train_gb:</span><br><span class="line">    info = {}</span><br><span class="line">    kind_data = kind_data[kind_data[<span class="string">'price'</span>] > <span class="number">0</span>] <span class="comment"># kind_data['price'] > 0 返回的是下标再取一次列表就得到了数据</span></span><br><span class="line">    info[<span class="string">'brand_amount'</span>] = len(kind_data)</span><br><span class="line">    info[<span class="string">'brand_price_max'</span>] = kind_data.price.max()</span><br><span class="line">    info[<span class="string">'brand_price_median'</span>] = kind_data.price.median()</span><br><span class="line">    info[<span class="string">'brand_price_min'</span>] = kind_data.price.min()</span><br><span class="line">    info[<span class="string">'brand_price_sum'</span>] = kind_data.price.sum()</span><br><span class="line">    info[<span class="string">'brand_price_std'</span>] = kind_data.price.std()</span><br><span class="line">    info[<span class="string">'brand_price_average'</span>] = round(kind_data.price.sum() / (len(kind_data) + <span class="number">1</span>), <span class="number">2</span>)</span><br><span class="line">    all_info[kind] = info</span><br><span class="line">brand_fe = pd.DataFrame(all_info).T.reset_index().rename(columns={<span class="string">"index"</span>: <span class="string">"brand"</span>})</span><br><span class="line">data = data.merge(brand_fe, how=<span class="string">'left'</span>, on=<span class="string">'brand'</span>)</span><br><span class="line">data</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>regDate</th>
      <th>model</th>
      <th>brand</th>
      <th>bodyType</th>
      <th>fuelType</th>
      <th>gearbox</th>
      <th>power</th>
      <th>kilometer</th>
      <th>...</th>
      <th>train</th>
      <th>used_time</th>
      <th>city</th>
      <th>brand_amount</th>
      <th>brand_price_max</th>
      <th>brand_price_median</th>
      <th>brand_price_min</th>
      <th>brand_price_sum</th>
      <th>brand_price_std</th>
      <th>brand_price_average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>2262</td>
      <td>20030301</td>
      <td>40.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>15.0</td>
      <td>...</td>
      <td>1</td>
      <td>4757.0</td>
      <td>4</td>
      <td>4940.0</td>
      <td>9500.0</td>
      <td>2999.0</td>
      <td>149.0</td>
      <td>17934852.0</td>
      <td>2537.956443</td>
      <td>3629.80</td>
    </tr>
    <tr>
      <td>1</td>
      <td>5</td>
      <td>137642</td>
      <td>20090602</td>
      <td>24.0</td>
      <td>10</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>109</td>
      <td>10.0</td>
      <td>...</td>
      <td>1</td>
      <td>2482.0</td>
      <td>3</td>
      <td>3557.0</td>
      <td>9500.0</td>
      <td>2490.0</td>
      <td>200.0</td>
      <td>10936962.0</td>
      <td>2180.881827</td>
      <td>3073.91</td>
    </tr>
    <tr>
      <td>2</td>
      <td>7</td>
      <td>165346</td>
      <td>19990706</td>
      <td>26.0</td>
      <td>14</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>101</td>
      <td>15.0</td>
      <td>...</td>
      <td>1</td>
      <td>6108.0</td>
      <td>4</td>
      <td>8784.0</td>
      <td>9500.0</td>
      <td>1350.0</td>
      <td>13.0</td>
      <td>17445064.0</td>
      <td>1797.704405</td>
      <td>1985.78</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10</td>
      <td>18961</td>
      <td>20050811</td>
      <td>19.0</td>
      <td>9</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>101</td>
      <td>15.0</td>
      <td>...</td>
      <td>1</td>
      <td>3874.0</td>
      <td>1</td>
      <td>4487.0</td>
      <td>9500.0</td>
      <td>1250.0</td>
      <td>55.0</td>
      <td>7867901.0</td>
      <td>1556.621159</td>
      <td>1753.10</td>
    </tr>
    <tr>
      <td>4</td>
      <td>13</td>
      <td>8129</td>
      <td>20041110</td>
      <td>65.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>150</td>
      <td>15.0</td>
      <td>...</td>
      <td>1</td>
      <td>4154.0</td>
      <td>3</td>
      <td>4940.0</td>
      <td>9500.0</td>
      <td>2999.0</td>
      <td>149.0</td>
      <td>17934852.0</td>
      <td>2537.956443</td>
      <td>3629.80</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>112975</td>
      <td>199995</td>
      <td>20903</td>
      <td>19960503</td>
      <td>4.0</td>
      <td>4</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>116</td>
      <td>15.0</td>
      <td>...</td>
      <td>0</td>
      <td>7261.0</td>
      <td>3</td>
      <td>6368.0</td>
      <td>9500.0</td>
      <td>3000.0</td>
      <td>150.0</td>
      <td>24046576.0</td>
      <td>2558.650243</td>
      <td>3775.57</td>
    </tr>
    <tr>
      <td>112976</td>
      <td>199996</td>
      <td>708</td>
      <td>19991011</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>75</td>
      <td>15.0</td>
      <td>...</td>
      <td>0</td>
      <td>6014.0</td>
      <td>1</td>
      <td>16371.0</td>
      <td>9500.0</td>
      <td>2150.0</td>
      <td>50.0</td>
      <td>46735356.0</td>
      <td>2276.755156</td>
      <td>2854.59</td>
    </tr>
    <tr>
      <td>112977</td>
      <td>199997</td>
      <td>6693</td>
      <td>20040412</td>
      <td>49.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>224</td>
      <td>15.0</td>
      <td>...</td>
      <td>0</td>
      <td>4345.0</td>
      <td>3</td>
      <td>4940.0</td>
      <td>9500.0</td>
      <td>2999.0</td>
      <td>149.0</td>
      <td>17934852.0</td>
      <td>2537.956443</td>
      <td>3629.80</td>
    </tr>
    <tr>
      <td>112978</td>
      <td>199998</td>
      <td>96900</td>
      <td>20020008</td>
      <td>27.0</td>
      <td>1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>334</td>
      <td>15.0</td>
      <td>...</td>
      <td>0</td>
      <td>NaN</td>
      <td>1</td>
      <td>4940.0</td>
      <td>9500.0</td>
      <td>2999.0</td>
      <td>149.0</td>
      <td>17934852.0</td>
      <td>2537.956443</td>
      <td>3629.80</td>
    </tr>
    <tr>
      <td>112979</td>
      <td>199999</td>
      <td>193384</td>
      <td>20041109</td>
      <td>166.0</td>
      <td>6</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>68</td>
      <td>9.0</td>
      <td>...</td>
      <td>0</td>
      <td>4151.0</td>
      <td>3</td>
      <td>5778.0</td>
      <td>9500.0</td>
      <td>1400.0</td>
      <td>50.0</td>
      <td>11955982.0</td>
      <td>1871.933447</td>
      <td>2068.87</td>
    </tr>
  </tbody>
</table>
<p>112980 rows × 41 columns</p>
</div>




<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brand_fe</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>brand_amount</th>
      <th>brand_price_max</th>
      <th>brand_price_median</th>
      <th>brand_price_min</th>
      <th>brand_price_sum</th>
      <th>brand_price_std</th>
      <th>brand_price_average</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>16371.0</td>
      <td>9500.0</td>
      <td>2150.0</td>
      <td>50.0</td>
      <td>46735356.0</td>
      <td>2276.755156</td>
      <td>2854.59</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>4940.0</td>
      <td>9500.0</td>
      <td>2999.0</td>
      <td>149.0</td>
      <td>17934852.0</td>
      <td>2537.956443</td>
      <td>3629.80</td>
    </tr>
    <tr>
      <td>2</td>
      <td>3</td>
      <td>665.0</td>
      <td>9500.0</td>
      <td>2800.0</td>
      <td>99.0</td>
      <td>2158773.0</td>
      <td>2058.532395</td>
      <td>3241.40</td>
    </tr>
    <tr>
      <td>3</td>
      <td>4</td>
      <td>6368.0</td>
      <td>9500.0</td>
      <td>3000.0</td>
      <td>150.0</td>
      <td>24046576.0</td>
      <td>2558.650243</td>
      <td>3775.57</td>
    </tr>
    <tr>
      <td>4</td>
      <td>5</td>
      <td>2842.0</td>
      <td>9500.0</td>
      <td>1850.0</td>
      <td>75.0</td>
      <td>6562224.0</td>
      <td>1738.415572</td>
      <td>2308.20</td>
    </tr>
    <tr>
      <td>5</td>
      <td>6</td>
      <td>5778.0</td>
      <td>9500.0</td>
      <td>1400.0</td>
      <td>50.0</td>
      <td>11955982.0</td>
      <td>1871.933447</td>
      <td>2068.87</td>
    </tr>
    <tr>
      <td>6</td>
      <td>7</td>
      <td>1035.0</td>
      <td>9500.0</td>
      <td>1500.0</td>
      <td>100.0</td>
      <td>2372550.0</td>
      <td>2071.320262</td>
      <td>2290.11</td>
    </tr>
    <tr>
      <td>7</td>
      <td>8</td>
      <td>705.0</td>
      <td>9500.0</td>
      <td>1100.0</td>
      <td>125.0</td>
      <td>1077211.0</td>
      <td>1318.748474</td>
      <td>1525.79</td>
    </tr>
    <tr>
      <td>8</td>
      <td>9</td>
      <td>4487.0</td>
      <td>9500.0</td>
      <td>1250.0</td>
      <td>55.0</td>
      <td>7867901.0</td>
      <td>1556.621159</td>
      <td>1753.10</td>
    </tr>
    <tr>
      <td>9</td>
      <td>10</td>
      <td>3557.0</td>
      <td>9500.0</td>
      <td>2490.0</td>
      <td>200.0</td>
      <td>10936962.0</td>
      <td>2180.881827</td>
      <td>3073.91</td>
    </tr>
    <tr>
      <td>10</td>
      <td>11</td>
      <td>1390.0</td>
      <td>9500.0</td>
      <td>1750.0</td>
      <td>50.0</td>
      <td>3513591.0</td>
      <td>2151.572044</td>
      <td>2525.95</td>
    </tr>
    <tr>
      <td>11</td>
      <td>12</td>
      <td>549.0</td>
      <td>9500.0</td>
      <td>1850.0</td>
      <td>100.0</td>
      <td>1413264.0</td>
      <td>2091.218447</td>
      <td>2569.57</td>
    </tr>
    <tr>
      <td>12</td>
      <td>13</td>
      <td>1689.0</td>
      <td>8950.0</td>
      <td>1250.0</td>
      <td>25.0</td>
      <td>2832005.0</td>
      <td>1363.018568</td>
      <td>1675.74</td>
    </tr>
    <tr>
      <td>13</td>
      <td>14</td>
      <td>8784.0</td>
      <td>9500.0</td>
      <td>1350.0</td>
      <td>13.0</td>
      <td>17445064.0</td>
      <td>1797.704405</td>
      <td>1985.78</td>
    </tr>
    <tr>
      <td>14</td>
      <td>15</td>
      <td>389.0</td>
      <td>9500.0</td>
      <td>5700.0</td>
      <td>1800.0</td>
      <td>2247357.0</td>
      <td>1795.404288</td>
      <td>5762.45</td>
    </tr>
    <tr>
      <td>15</td>
      <td>16</td>
      <td>291.0</td>
      <td>8900.0</td>
      <td>1950.0</td>
      <td>300.0</td>
      <td>636703.0</td>
      <td>1223.490908</td>
      <td>2180.49</td>
    </tr>
    <tr>
      <td>16</td>
      <td>17</td>
      <td>542.0</td>
      <td>9500.0</td>
      <td>1970.0</td>
      <td>150.0</td>
      <td>1444129.0</td>
      <td>2136.402905</td>
      <td>2659.54</td>
    </tr>
    <tr>
      <td>17</td>
      <td>18</td>
      <td>66.0</td>
      <td>8990.0</td>
      <td>1650.0</td>
      <td>150.0</td>
      <td>167360.0</td>
      <td>2514.210817</td>
      <td>2497.91</td>
    </tr>
    <tr>
      <td>18</td>
      <td>19</td>
      <td>341.0</td>
      <td>9100.0</td>
      <td>1200.0</td>
      <td>130.0</td>
      <td>540335.0</td>
      <td>1337.203100</td>
      <td>1579.93</td>
    </tr>
    <tr>
      <td>19</td>
      <td>20</td>
      <td>514.0</td>
      <td>8150.0</td>
      <td>1200.0</td>
      <td>100.0</td>
      <td>818973.0</td>
      <td>1276.623577</td>
      <td>1590.24</td>
    </tr>
    <tr>
      <td>20</td>
      <td>21</td>
      <td>527.0</td>
      <td>8900.0</td>
      <td>1890.0</td>
      <td>99.0</td>
      <td>1285258.0</td>
      <td>1832.524896</td>
      <td>2434.20</td>
    </tr>
    <tr>
      <td>21</td>
      <td>22</td>
      <td>222.0</td>
      <td>9300.0</td>
      <td>1925.0</td>
      <td>190.0</td>
      <td>592296.0</td>
      <td>2118.280894</td>
      <td>2656.04</td>
    </tr>
    <tr>
      <td>22</td>
      <td>23</td>
      <td>68.0</td>
      <td>9500.0</td>
      <td>1194.5</td>
      <td>100.0</td>
      <td>110253.0</td>
      <td>1754.883573</td>
      <td>1597.87</td>
    </tr>
    <tr>
      <td>23</td>
      <td>24</td>
      <td>4.0</td>
      <td>8600.0</td>
      <td>7550.0</td>
      <td>5999.0</td>
      <td>29699.0</td>
      <td>1072.435041</td>
      <td>5939.80</td>
    </tr>
    <tr>
      <td>24</td>
      <td>25</td>
      <td>735.0</td>
      <td>9500.0</td>
      <td>1500.0</td>
      <td>100.0</td>
      <td>1725999.0</td>
      <td>2152.726491</td>
      <td>2345.11</td>
    </tr>
    <tr>
      <td>25</td>
      <td>26</td>
      <td>121.0</td>
      <td>9500.0</td>
      <td>2699.0</td>
      <td>300.0</td>
      <td>417260.0</td>
      <td>2563.586943</td>
      <td>3420.16</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="3️⃣-树模型的数据分桶"><a href="#3️⃣-树模型的数据分桶" class="headerlink" title="3️⃣ 树模型的数据分桶"></a>3️⃣ 树模型的数据分桶</h2><p>  数据分箱（也称为离散分箱或分段）是一种数据预处理技术，用于减少次要观察误差的影响，是一种将多个连续值分组为较少数量的“分箱”的方法。例如我们有各个年龄的数据的统计值，可以分成某个段的年龄的值。</p>
<ol>
<li>离散后稀疏向量内积乘法运算速度更快，计算结果也方便存储，容易扩展；</li>
<li>离散后的特征对异常值更具鲁棒性，如 age>30 为 1 否则为 0，对于年龄为 200 的也不会对模型造成很大的干扰；</li>
<li>LR 属于广义线性模型，表达能力有限，经过离散化后，每个变量有单独的权重，这相当于引入了非线性，能够提升模型的表达能力，加大拟合；</li>
<li>离散后特征可以进行特征交叉，提升表达能力，由 M+N 个变量变成 M*N 个变量，进一步引入非线形，提升了表达能力；</li>
<li>特征离散后模型更稳定，如用户年龄区间，不会因为用户年龄长了一岁就变化</li>
</ol>
<p>下面以<code>power</code>为例子，做一次数据分桶</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bin = [i*<span class="number">10</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">31</span>)]</span><br><span class="line">data[<span class="string">'power_bin'</span>] = pd.cut(data[<span class="string">'power'</span>], bin, labels=<span class="literal">False</span>)</span><br><span class="line">data[[<span class="string">'power_bin'</span>, <span class="string">'power'</span>]]</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>power_bin</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>10.0</td>
      <td>109</td>
    </tr>
    <tr>
      <td>2</td>
      <td>10.0</td>
      <td>101</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10.0</td>
      <td>101</td>
    </tr>
    <tr>
      <td>4</td>
      <td>14.0</td>
      <td>150</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>112975</td>
      <td>11.0</td>
      <td>116</td>
    </tr>
    <tr>
      <td>112976</td>
      <td>7.0</td>
      <td>75</td>
    </tr>
    <tr>
      <td>112977</td>
      <td>22.0</td>
      <td>224</td>
    </tr>
    <tr>
      <td>112978</td>
      <td>NaN</td>
      <td>334</td>
    </tr>
    <tr>
      <td>112979</td>
      <td>6.0</td>
      <td>68</td>
    </tr>
  </tbody>
</table>
<p>112980 rows × 2 columns</p>
</div>



<p>可以看出这个分箱的作用就是将同一个区间段的功率值设为同样的值，比如101~109都设置为10.0。<br>然后就可以删除掉原数据了：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = data.drop([<span class="string">'creatDate'</span>, <span class="string">'regDate'</span>, <span class="string">'regionCode'</span>], axis=<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(data.shape)</span><br><span class="line">data.columns</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(112980, 39)





Index(['SaleID', 'name', 'model', 'brand', 'bodyType', 'fuelType', 'gearbox',
       'power', 'kilometer', 'notRepairedDamage', 'seller', 'offerType',
       'price', 'v_0', 'v_1', 'v_2', 'v_3', 'v_4', 'v_5', 'v_6', 'v_7', 'v_8',
       'v_9', 'v_10', 'v_11', 'v_12', 'v_13', 'v_14', 'train', 'used_time',
       'city', 'brand_amount', 'brand_price_max', 'brand_price_median',
       'brand_price_min', 'brand_price_sum', 'brand_price_std',
       'brand_price_average', 'power_bin'],
      dtype='object')
</code></pre><p>至此，可以导出给树模型用的数据</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_csv(<span class="string">'data_for_tree.csv'</span>, index=<span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="4️⃣-LR与NN模型的特征构造"><a href="#4️⃣-LR与NN模型的特征构造" class="headerlink" title="4️⃣ LR与NN模型的特征构造"></a>4️⃣ LR与NN模型的特征构造</h2><p>  上面的步骤就是一次比较完备的特征构造，我们还可以为其他模型构造特征，主要是由于不用模型需要的数据输入是不同的。</p>
<h3 id="4️⃣-1️⃣-log-与归一化"><a href="#4️⃣-1️⃣-log-与归一化" class="headerlink" title="4️⃣.1️⃣ $log$与归一化"></a>4️⃣.1️⃣ $log$与归一化</h3><p>观察一下数据分布</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'power'</span>].plot.hist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x2108b6377b8>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004706243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>再看看<code>train</code>数据集的分布：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train[<span class="string">'power'</span>].plot.hist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x2108b4ed588>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004719447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>我们对其取 log，再做归一化</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'power'</span>] = np.log(data[<span class="string">'power'</span>] + <span class="number">1</span>) </span><br><span class="line">data[<span class="string">'power'</span>] = ((data[<span class="string">'power'</span>] - np.min(data[<span class="string">'power'</span>])) / (np.max(data[<span class="string">'power'</span>]) - np.min(data[<span class="string">'power'</span>])))</span><br><span class="line">data[<span class="string">'power'</span>].plot.hist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x2108abc1438>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004913553.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>看看行驶里程的情况，应该是原始数据已经分好了桶</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'kilometer'</span>].plot.hist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x2108abc1390>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004748777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>归一化</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">'kilometer'</span>] = ((data[<span class="string">'kilometer'</span>] - np.min(data[<span class="string">'kilometer'</span>])) / </span><br><span class="line">                        (np.max(data[<span class="string">'kilometer'</span>]) - np.min(data[<span class="string">'kilometer'</span>])))</span><br><span class="line">data[<span class="string">'kilometer'</span>].plot.hist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x2108aca0898>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402004923471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>对刚刚构造的统计量进行归一化</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_min</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (x - np.min(x)) / (np.max(x) - np.min(x))</span><br><span class="line"></span><br><span class="line">data.columns[<span class="number">-10</span>:]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Index(['used_time', 'city', 'brand_amount', 'brand_price_max',
       'brand_price_median', 'brand_price_min', 'brand_price_sum',
       'brand_price_std', 'brand_price_average', 'power_bin'],
      dtype='object')
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> data.columns[<span class="number">-10</span>:]:</span><br><span class="line">    <span class="keyword">if</span> np.min(data[i]) != <span class="string">''</span>: <span class="comment"># 存在空值的情况</span></span><br><span class="line">        data[i] = max_min(data[i])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="4️⃣-2️⃣-OneEncoder-编码"><a href="#4️⃣-2️⃣-OneEncoder-编码" class="headerlink" title="4️⃣.2️⃣ $OneEncoder$编码"></a>4️⃣.2️⃣ $OneEncoder$编码</h3><p>  对类别特征进行$OneEncoder$<br><br>在此之前先介绍一下$OneEncoder$编码:$one-hot$的基本思想，将离散型特征的每一种取值都看成一种状态，若你的这一特征中有$N$个不相同的取值，那么我们就可以将该特征抽象成$N$种不同的状态，$one-hot$编码保证了每一个取值只会使得一种状态处于“激活态”，也就是说这N种状态中只有一个状态位值为1，其他状态位都是0。举个例子，假设我们以学历为例，我们想要研究的类别为小学、中学、大学、硕士、博士五种类别，我们使用$one-hot$对其编码就会得到：</p>
<p><img src="https://img-blog.csdnimg.cn/20200402004945672.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<ul>
<li>$dummy \quad encoding$</li>
</ul>
<p>哑变量编码直观的解释就是任意的将一个状态位去除。还是拿上面的例子来说，我们用4个状态位就足够反应上述5个类别的信息，也就是我们仅仅使用前四个状态位 [0,0,0,0] 就可以表达博士了。只是因为对于一个我们研究的样本，他已不是小学生、也不是中学生、也不是大学生、又不是研究生，那么我们就可以默认他是博士，是不是。所以，我们用哑变量编码可以将上述5类表示成：</p>
<p><img src="https://img-blog.csdnimg.cn/20200402004956905.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = pd.get_dummies(data, columns=[<span class="string">'model'</span>, <span class="string">'brand'</span>, <span class="string">'bodyType'</span>, <span class="string">'fuelType'</span>,</span><br><span class="line">                                     <span class="string">'gearbox'</span>, <span class="string">'notRepairedDamage'</span>, <span class="string">'power_bin'</span>])</span><br><span class="line">data</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>power</th>
      <th>kilometer</th>
      <th>seller</th>
      <th>offerType</th>
      <th>price</th>
      <th>v_0</th>
      <th>v_1</th>
      <th>v_2</th>
      <th>...</th>
      <th>power_bin_0.6896551724137931</th>
      <th>power_bin_0.7241379310344828</th>
      <th>power_bin_0.7586206896551724</th>
      <th>power_bin_0.7931034482758621</th>
      <th>power_bin_0.8275862068965517</th>
      <th>power_bin_0.8620689655172413</th>
      <th>power_bin_0.896551724137931</th>
      <th>power_bin_0.9310344827586207</th>
      <th>power_bin_0.9655172413793104</th>
      <th>power_bin_1.0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>2262</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>3600.0</td>
      <td>45.305273</td>
      <td>5.236112</td>
      <td>0.137925</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>5</td>
      <td>137642</td>
      <td>0.474626</td>
      <td>0.655172</td>
      <td>0</td>
      <td>0</td>
      <td>8000.0</td>
      <td>46.323165</td>
      <td>-3.229285</td>
      <td>0.156615</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>7</td>
      <td>165346</td>
      <td>0.467002</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>1000.0</td>
      <td>42.255586</td>
      <td>-3.167771</td>
      <td>-0.676693</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10</td>
      <td>18961</td>
      <td>0.467002</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>3100.0</td>
      <td>45.401241</td>
      <td>4.195311</td>
      <td>-0.370513</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>13</td>
      <td>8129</td>
      <td>0.506615</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>3100.0</td>
      <td>46.844574</td>
      <td>4.175332</td>
      <td>0.490609</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>112975</td>
      <td>199995</td>
      <td>20903</td>
      <td>0.480856</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>45.621391</td>
      <td>5.958453</td>
      <td>-0.918571</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112976</td>
      <td>199996</td>
      <td>708</td>
      <td>0.437292</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>43.935162</td>
      <td>4.476841</td>
      <td>-0.841710</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112977</td>
      <td>199997</td>
      <td>6693</td>
      <td>0.546885</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>46.537137</td>
      <td>4.170806</td>
      <td>0.388595</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112978</td>
      <td>199998</td>
      <td>96900</td>
      <td>0.587076</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>46.771359</td>
      <td>-3.296814</td>
      <td>0.243566</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112979</td>
      <td>199999</td>
      <td>193384</td>
      <td>0.427535</td>
      <td>0.586207</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>43.731010</td>
      <td>-3.121867</td>
      <td>0.027348</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>112980 rows × 369 columns</p>
</div>



<ul>
<li>将这份数据输出给LR模型使用</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_csv(<span class="string">'data_for_lr.csv'</span>, index=<span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="5️⃣-特征选择"><a href="#5️⃣-特征选择" class="headerlink" title="5️⃣ 特征选择"></a>5️⃣ 特征选择</h2><h3 id="5️⃣-1️⃣-过滤式-filter"><a href="#5️⃣-1️⃣-过滤式-filter" class="headerlink" title="5️⃣.1️⃣ 过滤式(filter)"></a>5️⃣.1️⃣ 过滤式(filter)</h3><p>相关性分析</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(data[<span class="string">'power'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br><span class="line">print(data[<span class="string">'kilometer'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br><span class="line">print(data[<span class="string">'brand_amount'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br><span class="line">print(data[<span class="string">'brand_price_average'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br><span class="line">print(data[<span class="string">'brand_price_max'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br><span class="line">print(data[<span class="string">'brand_price_median'</span>].corr(data[<span class="string">'price'</span>], method=<span class="string">'spearman'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0.4698539569820024
-0.19974282513118508
0.04085800320025127
0.3135239590412946
0.07894119089254827
0.3138873049004745
</code></pre><p>可以看出<code>power</code>，<code>brand_price_average</code>，<code>brand_price_median</code>与<code>price</code>相关性比较高</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data_numeric = data[[<span class="string">'power'</span>, <span class="string">'kilometer'</span>, <span class="string">'brand_amount'</span>, <span class="string">'brand_price_average'</span>, </span><br><span class="line">                     <span class="string">'brand_price_max'</span>, <span class="string">'brand_price_median'</span>]]</span><br><span class="line">correlation = data_numeric.corr()</span><br><span class="line"></span><br><span class="line">f , ax = plt.subplots(figsize = (<span class="number">7</span>, <span class="number">7</span>))</span><br><span class="line">plt.title(<span class="string">'Correlation of Numeric Features with Price'</span>,y=<span class="number">1</span>,size=<span class="number">30</span>)</span><br><span class="line">sns.heatmap(correlation, square = <span class="literal">True</span>, cmap = <span class="string">'PuBuGn'</span>, vmax=<span class="number">0.8</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code><matplotlib.axes._subplots.AxesSubplot at 0x21096f60198>
</code></pre><p><img src="https://img-blog.csdnimg.cn/20200402005026878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>看不出来啥。😛</p>
<h3 id="5️⃣-2️⃣-包裹式-wrapper"><a href="#5️⃣-2️⃣-包裹式-wrapper" class="headerlink" title="5️⃣.2️⃣ 包裹式(wrapper)"></a>5️⃣.2️⃣ 包裹式(wrapper)</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!pip install mlxtend</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Collecting mlxtend
  Downloading https://files.pythonhosted.org/packages/64/e2/1610a86284029abcad0ac9bc86cb19f9787fe6448ede467188b2a5121bb4/mlxtend-0.17.2-py2.py3-none-any.whl (1.3MB)
Requirement already satisfied: setuptools in d:\software\anaconda\lib\site-packages (from mlxtend) (40.8.0)
Requirement already satisfied: pandas>=0.24.2 in d:\software\anaconda\lib\site-packages (from mlxtend) (0.25.1)
Requirement already satisfied: scipy>=1.2.1 in d:\software\anaconda\lib\site-packages (from mlxtend) (1.2.1)
Requirement already satisfied: matplotlib>=3.0.0 in d:\software\anaconda\lib\site-packages (from mlxtend) (3.0.3)
Requirement already satisfied: numpy>=1.16.2 in d:\software\anaconda\lib\site-packages (from mlxtend) (1.16.2)
Collecting joblib>=0.13.2 (from mlxtend)
  Downloading https://files.pythonhosted.org/packages/28/5c/cf6a2b65a321c4a209efcdf64c2689efae2cb62661f8f6f4bb28547cf1bf/joblib-0.14.1-py2.py3-none-any.whl (294kB)
Requirement already satisfied: scikit-learn>=0.20.3 in d:\software\anaconda\lib\site-packages (from mlxtend) (0.20.3)
Requirement already satisfied: pytz>=2017.2 in d:\software\anaconda\lib\site-packages (from pandas>=0.24.2->mlxtend) (2018.9)
Requirement already satisfied: python-dateutil>=2.6.1 in d:\software\anaconda\lib\site-packages (from pandas>=0.24.2->mlxtend) (2.8.0)
Requirement already satisfied: cycler>=0.10 in d:\software\anaconda\lib\site-packages (from matplotlib>=3.0.0->mlxtend) (0.10.0)
Requirement already satisfied: kiwisolver>=1.0.1 in d:\software\anaconda\lib\site-packages (from matplotlib>=3.0.0->mlxtend) (1.0.1)
Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,>=2.0.1 in d:\software\anaconda\lib\site-packages (from matplotlib>=3.0.0->mlxtend) (2.3.1)
Requirement already satisfied: six>=1.5 in d:\software\anaconda\lib\site-packages (from python-dateutil>=2.6.1->pandas>=0.24.2->mlxtend) (1.12.0)
Installing collected packages: joblib, mlxtend
Successfully installed joblib-0.14.1 mlxtend-0.17.2
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SaleID</th>
      <th>name</th>
      <th>power</th>
      <th>kilometer</th>
      <th>seller</th>
      <th>offerType</th>
      <th>v_0</th>
      <th>v_1</th>
      <th>v_2</th>
      <th>v_3</th>
      <th>...</th>
      <th>power_bin_0.6896551724137931</th>
      <th>power_bin_0.7241379310344828</th>
      <th>power_bin_0.7586206896551724</th>
      <th>power_bin_0.7931034482758621</th>
      <th>power_bin_0.8275862068965517</th>
      <th>power_bin_0.8620689655172413</th>
      <th>power_bin_0.896551724137931</th>
      <th>power_bin_0.9310344827586207</th>
      <th>power_bin_0.9655172413793104</th>
      <th>power_bin_1.0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>2262</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>45.305273</td>
      <td>5.236112</td>
      <td>0.137925</td>
      <td>1.380657</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>5</td>
      <td>137642</td>
      <td>0.474626</td>
      <td>0.655172</td>
      <td>0</td>
      <td>0</td>
      <td>46.323165</td>
      <td>-3.229285</td>
      <td>0.156615</td>
      <td>-1.727217</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>7</td>
      <td>165346</td>
      <td>0.467002</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>42.255586</td>
      <td>-3.167771</td>
      <td>-0.676693</td>
      <td>1.942673</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10</td>
      <td>18961</td>
      <td>0.467002</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>45.401241</td>
      <td>4.195311</td>
      <td>-0.370513</td>
      <td>0.444251</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>13</td>
      <td>8129</td>
      <td>0.506615</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>46.844574</td>
      <td>4.175332</td>
      <td>0.490609</td>
      <td>0.085718</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>112975</td>
      <td>199995</td>
      <td>20903</td>
      <td>0.480856</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>45.621391</td>
      <td>5.958453</td>
      <td>-0.918571</td>
      <td>0.774826</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112976</td>
      <td>199996</td>
      <td>708</td>
      <td>0.437292</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>43.935162</td>
      <td>4.476841</td>
      <td>-0.841710</td>
      <td>1.328253</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112977</td>
      <td>199997</td>
      <td>6693</td>
      <td>0.546885</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>46.537137</td>
      <td>4.170806</td>
      <td>0.388595</td>
      <td>-0.704689</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112978</td>
      <td>199998</td>
      <td>96900</td>
      <td>0.587076</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0</td>
      <td>46.771359</td>
      <td>-3.296814</td>
      <td>0.243566</td>
      <td>-1.277411</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>112979</td>
      <td>199999</td>
      <td>193384</td>
      <td>0.427535</td>
      <td>0.586207</td>
      <td>0</td>
      <td>0</td>
      <td>43.731010</td>
      <td>-3.121867</td>
      <td>0.027348</td>
      <td>-0.808914</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>112980 rows × 368 columns</p>
</div>




<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mlxtend.feature_selection <span class="keyword">import</span> SequentialFeatureSelector <span class="keyword">as</span> SFS</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line">sfs = SFS(LinearRegression(),</span><br><span class="line">           k_features=<span class="number">10</span>,</span><br><span class="line">           forward=<span class="literal">True</span>,</span><br><span class="line">           floating=<span class="literal">False</span>,</span><br><span class="line">           scoring = <span class="string">'r2'</span>,</span><br><span class="line">           cv = <span class="number">0</span>)</span><br><span class="line">x = data.drop([<span class="string">'price'</span>], axis=<span class="number">1</span>)</span><br><span class="line">x = x.fillna(<span class="number">0</span>)</span><br><span class="line">y = data[<span class="string">'price'</span>]</span><br><span class="line">x.dropna(axis=<span class="number">0</span>, how=<span class="string">'any'</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">y.dropna(axis=<span class="number">0</span>, how=<span class="string">'any'</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">sfs.fit(x, y)</span><br><span class="line">sfs.k_feature_names_</span><br></pre></td></tr></tbody></table></figure>
<p>画出来，可以看到边际效益</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mlxtend.plotting <span class="keyword">import</span> plot_sequential_feature_selection <span class="keyword">as</span> plot_sfs</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig1 = plot_sfs(sfs.get_metric_dict(), kind=<span class="string">'std_dev'</span>)</span><br><span class="line">plt.grid()</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200402005051474.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="5️⃣-3️⃣-嵌入式（embedding）"><a href="#5️⃣-3️⃣-嵌入式（embedding）" class="headerlink" title="5️⃣.3️⃣ 嵌入式（embedding）"></a>5️⃣.3️⃣ 嵌入式（embedding）</h3><p>Lasso 回归和决策树可以完成嵌入式特征选择，大部分情况下都是用嵌入式做特征筛选。</p>
<p>下一步就是建模了。🤔</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="\天池-二手车价格预测-Task4-建模调参.html" rel="bookmark">天池_二手车价格预测_Task4_建模调参</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="\天池-二手车价格预测-Task1-2-赛题理解与数据分析.html" rel="bookmark">天池二手车价格预测Task1-2—赛题理解与数据分析</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="\从零实现朴素贝叶斯分类器-离散情况-以学生分班为例.html" rel="bookmark">从零实现朴素贝叶斯分类器(离散情况)--以学生分班为例</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="\一文解决-matplotlib绘制极坐标热力图并插值优化.html" rel="bookmark">一文解决--matplotlib绘制极坐标热力图并插值优化</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="\利用Selenium秒填朋友圈各种问卷星调查问卷.html" rel="bookmark">利用Selenium秒填朋友圈各种问卷星调查问卷</a></div>
      
    </li>
  
  </ul>


    
    
    
     
     
  



    
      <div>
        <div id="reward-container">
  <div>喜欢就支持一下吧~</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
        
      
      <div style="display: inline-block">
        <img src="/images/微信.jpg" alt="柯摩 微信支付">
        <p>微信支付</p>
      </div>
        
      
      <div style="display: inline-block">
        <img src="/images/支付宝.jpg" alt="柯摩 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

      </div>
      <div>
        

<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>柯摩</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://kemo.xyz/天池-二手车价格预测-Task-3-特征工程.html" title="天池_二手车价格预测_Task_3_特征工程">https://kemo.xyz/天池-二手车价格预测-Task-3-特征工程.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>

    <footer class="post-footer">
          
        
        <div class="post-tags">
            <a href="/tags/pandas/" rel="tag"><i class="fa fa-tag"></i> pandas</a>
          
            <a href="/tags/Editor/" rel="tag"><i class="fa fa-tag"></i> Editor</a>
          
            <a href="/tags/DataMining/" rel="tag"><i class="fa fa-tag"></i> DataMining</a>
          
            <a href="/tags/Tianchi/" rel="tag"><i class="fa fa-tag"></i> Tianchi</a>
          
            <a href="/tags/Study/" rel="tag"><i class="fa fa-tag"></i> Study</a>
          
            <a href="/tags/Jupyter/" rel="tag"><i class="fa fa-tag"></i> Jupyter</a>
          
            <a href="/tags/seaborn/" rel="tag"><i class="fa fa-tag"></i> seaborn</a>
          
            <a href="/tags/Onehot/" rel="tag"><i class="fa fa-tag"></i> Onehot</a>
          
            <a href="/tags/BoxPlot/" rel="tag"><i class="fa fa-tag"></i> BoxPlot</a>
          
            <a href="/tags/IQR/" rel="tag"><i class="fa fa-tag"></i> IQR</a>
          
            <a href="/tags/groupby/" rel="tag"><i class="fa fa-tag"></i> groupby</a>
          
            <a href="/tags/过滤式-filter/" rel="tag"><i class="fa fa-tag"></i> 过滤式(filter)</a>
          
            <a href="/tags/包裹式-wrapper/" rel="tag"><i class="fa fa-tag"></i> 包裹式(wrapper)</a>
          
            <a href="/tags/嵌入式（embedding）/" rel="tag"><i class="fa fa-tag"></i> 嵌入式（embedding）</a>
          
        </div>
        <div class="post-widgets">
        
        
          <div class="wp_rating">
          
            <div id="wpac-rating"></div>
          </div>
        

        

        
          <div class="social-share">
            
              


<div class="likely">
    <div class="twitter">Tweet</div>
    <div class="facebook">Share</div>
    <div class="linkedin">Link</div>
    <div class="gplus">Plus</div>
    <div class="vkontakte">Share</div>
    <div class="odnoklassniki">Class</div>
    <div class="telegram">Send</div>
    <div class="whatsapp">Send</div>
    <div class="pinterest">Pin</div>
</div>
<script src="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.js"></script>


            
            
              <div id="needsharebutton-postbottom">
                <span class="btn">
                  <i class="fa fa-share-alt" aria-hidden="true"></i>
                </span>
              </div>
            
          </div>
        
        </div>
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/完美解决：Hexo-Next主题本地可预览CSS，但部署到网站CSS失效问题.html" rel="next" title="完美解决：Hexo Next主题本地可预览CSS，但部署到网站CSS失效问题!">
                <i class="fa fa-chevron-left"></i> 完美解决：Hexo Next主题本地可预览CSS，但部署到网站CSS失效问题!
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
              <a href="/高性能分布式计算-HPC-作业1-节点实时通信.html" rel="prev" title="高性能分布式计算(HPC)作业1--节点实时通信">
                高性能分布式计算(HPC)作业1--节点实时通信 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>
<div>

  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:16px;">-------------   本 文 结 束 <i class="fa fa-heart"></i> 感 谢 您 的 阅 读    -------------</div>
    
</div>
  
</div>
 




    <script type="text/javascript" src="/js/src/linkcard.js"></script>
  </div>
<script type="text/javascript" src="/js/src/linkcard.js"></script>

          </div>
          
    
    <div class="comments" id="comments"></div>
  


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/head.jpg"
      alt="柯摩">
  <p class="site-author-name" itemprop="name">柯摩</p>
  <div class="site-description motion-element" itemprop="description">真实自有万钧之力</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/ExcaliburEX" title="GitHub &rarr; https://github.com/ExcaliburEX" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:912011727@qq.com" title="E-Mail &rarr; mailto:912011727@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://weibo.com/u/5339619827" title="Weibo &rarr; https://weibo.com/u/5339619827" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://user.qzone.qq.com/912011727" title="QQ &rarr; https://user.qzone.qq.com/912011727" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QQ</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://blog-1259799643.cos.ap-shanghai.myqcloud.com/wechat-qcode.jpg" title="Wechat &rarr; https://blog-1259799643.cos.ap-shanghai.myqcloud.com/wechat-qcode.jpg" rel="noopener" target="_blank"><i class="fa fa-fw fa-weixin"></i>Wechat</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://twitter.com/Excaliburjp" title="Twitter &rarr; https://twitter.com/Excaliburjp" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://space.bilibili.com/2142109" title="Bilibili &rarr; https://space.bilibili.com/2142109" rel="noopener" target="_blank"><i class="fa fa-fw fa-mobile"></i>Bilibili</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#特征工程🃏"><span class="nav-number">1.</span> <span class="nav-text">特征工程🃏</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#0️⃣-前言"><span class="nav-number">1.1.</span> <span class="nav-text">0️⃣ 前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#0️⃣-1️⃣-赛题重述"><span class="nav-number">1.1.1.</span> <span class="nav-text">0️⃣.1️⃣ 赛题重述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0️⃣-2️⃣-数据集概述"><span class="nav-number">1.1.2.</span> <span class="nav-text">0️⃣.2️⃣ 数据集概述</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1️⃣-异常缺失值删除"><span class="nav-number">1.2.</span> <span class="nav-text">1️⃣ 异常缺失值删除</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1️⃣-1️⃣-导入库与数据"><span class="nav-number">1.2.1.</span> <span class="nav-text">1️⃣.1️⃣  导入库与数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1️⃣-2️⃣-异常值删除"><span class="nav-number">1.2.2.</span> <span class="nav-text">1️⃣.2️⃣  异常值删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-树模型的特征构造"><span class="nav-number">1.3.</span> <span class="nav-text">2️⃣ 树模型的特征构造</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2️⃣-1️⃣-时间特征构造"><span class="nav-number">1.3.1.</span> <span class="nav-text">2️⃣.1️⃣ 时间特征构造</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2️⃣-2️⃣-城市信息特征提取"><span class="nav-number">1.3.2.</span> <span class="nav-text">2️⃣.2️⃣ 城市信息特征提取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2️⃣-3️⃣-品牌特征提取"><span class="nav-number">1.3.3.</span> <span class="nav-text">2️⃣.3️⃣ 品牌特征提取</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3️⃣-树模型的数据分桶"><span class="nav-number">1.4.</span> <span class="nav-text">3️⃣ 树模型的数据分桶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4️⃣-LR与NN模型的特征构造"><span class="nav-number">1.5.</span> <span class="nav-text">4️⃣ LR与NN模型的特征构造</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4️⃣-1️⃣-log-与归一化"><span class="nav-number">1.5.1.</span> <span class="nav-text">4️⃣.1️⃣ $log$与归一化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4️⃣-2️⃣-OneEncoder-编码"><span class="nav-number">1.5.2.</span> <span class="nav-text">4️⃣.2️⃣ $OneEncoder$编码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5️⃣-特征选择"><span class="nav-number">1.6.</span> <span class="nav-text">5️⃣ 特征选择</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5️⃣-1️⃣-过滤式-filter"><span class="nav-number">1.6.1.</span> <span class="nav-text">5️⃣.1️⃣ 过滤式(filter)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5️⃣-2️⃣-包裹式-wrapper"><span class="nav-number">1.6.2.</span> <span class="nav-text">5️⃣.2️⃣ 包裹式(wrapper)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5️⃣-3️⃣-嵌入式（embedding）"><span class="nav-number">1.6.3.</span> <span class="nav-text">5️⃣.3️⃣ 嵌入式（embedding）</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

  
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Barrier/">Barrier</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BeautifulSoup/">BeautifulSoup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BoxPlot/">BoxPlot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CVM/">CVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataMining/">DataMining</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECS/">ECS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Editor/">Editor</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/">Go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IPFS/">IPFS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IQR/">IQR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Job/">Job</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jupyter/">Jupyter</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lasso正则化/">Lasso正则化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Learning/">Learning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LightGBM/">LightGBM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Regression/">Linear Regression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MATLAB/">MATLAB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navie-Bayes/">Navie Bayes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Next/">Next</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OJ/">OJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Onehot/">Onehot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ridge正则化/">Ridge正则化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Science-Uranology/">Science Uranology</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Selenium/">Selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study/">Study</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thinking/">Thinking</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tianchi/">Tianchi</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XGBoost/">XGBoost</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xftp/">Xftp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xshell/">Xshell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alive-progress/">alive_progress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cross-validation/">cross validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/custom/">custom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/distributed-system/">distributed system</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/groupby/">groupby</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multithreading/">multithreading</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandas/">pandas</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests/">requests</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seaborn/">seaborn</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svm/">svm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二进制/">二进制</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/五折交叉验证/">五折交叉验证</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存优化/">内存优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策树/">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式计算/">分布式计算</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/包裹式-wrapper/">包裹式(wrapper)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/反向索引/">反向索引</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/回忆/">回忆</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地铁线路优化/">地铁线路优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多层感知机-MLP/">多层感知机(MLP)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式（embedding）/">嵌入式（embedding）</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感情/">感情</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插值/">插值</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学建模/">数学建模</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日记/">日记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/朋友圈/">朋友圈</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/朴素贝叶斯/">朴素贝叶斯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极坐标/">极坐标</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度提升树-GBDT/">梯度提升树(GBDT)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则表达式/">正则表达式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正态分布/">正态分布</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毕业论文/">毕业论文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/气象图/">气象图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/温馨/">温馨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/热力图/">热力图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/画图/">画图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目标函数/">目标函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/真挚/">真挚</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/私有网络/">私有网络</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/约束条件/">约束条件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网格调参/">网格调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/节点通信/">节点通信</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机/">虚拟机</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调查问卷/">调查问卷</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贝叶斯调参/">贝叶斯调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心调参/">贪心调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/过滤式-filter/">过滤式(filter)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/遗传算法/">遗传算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/问卷星/">问卷星</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随机森林/">随机森林</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a><span class="tag-list-count">2</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">柯摩</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">150k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">2:17</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">全站共 71.4k 字</span>
</div>

<div class="run_time" style=" text-align:center;">
  <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
  <script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("08/06/2019 00:00:00");//此处修改你的建站时间或者网站上线时间 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
    setInterval("createtime()",250);
  </script>

<div class="BbeiAn-info">
  皖ICP备 -
    <a target="_blank" href="https://beian.miit.gov.cn/" style="color:#f0d784"  rel="nofollow">19020907</a> <!--a标签中增加nofollow属性，避免爬虫出站。-->| 
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32050802011200" style="color:#f0d784;text-decoration:none;padding-left:30px;background:url(https://s1.ax1x.com/2018/09/29/ilmwIH.png) no-repeat left center" rel="nofollow">苏公网安备 32050802011200号</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      总访客量 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      总访客数 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
  
</div>




  <script>
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=66458571";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
  
  <div id="needsharebutton-float">
    <span class="btn">
      <i class="fa fa-share-alt" aria-hidden="true"></i>
    </span>
  </div>
<script src="/lib/needsharebutton/needsharebutton.js"></script>
<script>
    pbOptions = {};
      pbOptions.iconStyle = "box";
    
      pbOptions.boxForm = "horizontal";
    
      pbOptions.position = "bottomCenter";
    
      pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
    
    new needShareButton('#needsharebutton-postbottom', pbOptions);
    flOptions = {};
      flOptions.iconStyle = "box";
    
      flOptions.boxForm = "horizontal";
    
      flOptions.position = "middleRight";
    
      flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
    
    new needShareButton('#needsharebutton-float', flOptions);
</script>


  </div>

  
    
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>
  <script src="/lib/reading_progress/reading_progress.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>






  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>
  
  <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>




  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script>
  if (CONFIG.page.isPost) {
    bookmark.scrollToMark('auto', "#更多");
  } else {
    bookmark.loadBookmark();
  }
  </script>










  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: 20167,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>



  
<link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">
<script src="/lib/algolia-instant-search/instantsearch.min.js"></script>


<script src="/js/algolia-search.js?v=7.3.0"></script>









<script>
function embedPDF() {
  $('body').find('div.pdf').each(function(i, o) {
    PDFObject.embed($(o).attr('target'), $(o), {
      pdfOpenParams: {
        navpanes: 0,
        toolbar: 0,
        statusbar: 0,
        pagemode: 'thumbs',
        view: 'FitH'
      },
      PDFJS_URL: '/lib/pdf/web/viewer.html',
      height: $(o).attr('height') || '500px'
    });
  });
}
if ($('body').find('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', embedPDF, window.PDFObject);
}
</script>






  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>

  <script type="text/javascript" src="/js/src/linkcard.js"></script>

    

  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="https://site-1258928558.cos.ap-guangzhou.myqcloud.com/js/Valine.min.js"></script>

  <!--<script src="//unpkg.com/valine/dist/Valine.min.js"></script>-->
  <!-- https://deserts.io/diy-a-comment-system/ -->
  <script type="text/javascript">
    new Valine({
        lang: 'zh-cn',
        admin_email: '912011727@qq.com', //博主邮箱
        el: '#comments' ,
        appId: 'u4vO2zGHJKiMhlMhYbgBgq1E-gzGzoHsz',
        appKey: 'XRdJWVzmRfYF0uw6oUQztM7B',
        emoticon_url: 'https://cdn.jsdelivr.net/gh/ExcaliburEX/blog_file@master/emojis/',
        emoticon_list: ["aini.png",	"aoteman.png",	"aru (1).png",	"aru (2).png",	"aru (3).png",	"aru (4).png",	"aru (5).png",	"aru (6).png",	"aru (7).png",	"aru (8).png",	"aru (9).png",	"aru (10).png",	"aru (11).png",	"aru (12).png",	"aru (13).png",	"aru (14).png",	"aru (15).png",	"aru (16).png",	"aru (17).png",	"aru (18).png",	"aru (19).png",	"aru (20).png",	"aru (21).png",	"aru (22).png",	"aru (23).png",	"aru (24).png",	"aru (25).png",	"aru (26).png",	"aru (27).png",	"aru (28).png",	"aru (29).png",	"aru (30).png",	"aru (31).png",	"aru (32).png",	"aru (33).png",	"aru (34).png",	"aru (35).png",	"aru (36).png",	"aru (37).png",	"aru (38).png",	"aru (39).png",	"aru (40).png",	"aru (41).png",	"aru (42).png",	"aru (43).png",	"aru (44).png",	"aru (45).png",	"aru (46).png",	"aru (47).png",	"aru (48).png",	"aru (49).png",	"aru (50).png",	"aru (51).png",	"aru (52).png",	"aru (53).png",	"aru (54).png",	"aru (55).png",	"aru (56).png",	"aru (57).png",	"aru (58).png",	"aru (59).png",	"aru (60).png",	"aru (61).png",	"aru (62).png",	"aru (63).png",	"aru (64).png",	"aru (65).png",	"aru (66).png",	"aru (67).png",	"aru (68).png",	"aru (69).png",	"aru (70).png",	"aru (71).png",	"aru (72).png",	"aru (73).png",	"aru (74).png",	"aru (75).png",	"aru (76).png",	"aru (77).png",	"aru (78).png",	"aru (79).png",	"aru (80).png",	"aru (81).png",	"aru (82).png",	"aru (83).png",	"aru (84).png",	"aru (85).png",	"aru (86).png",	"aru (87).png",	"aru (88).png",	"aru (89).png",	"aru (90).png",	"aru (91).png",	"aru (92).png",	"aru (93).png",	"aru (94).png",	"aru (95).png",	"aru (96).png",	"aru (97).png",	"aru (98).png",	"aru (99).png",	"aru (100).png",	"aru (101).png",	"aru (102).png",	"aru (103).png",	"aru (104).png",	"aru (105).png",	"aru (106).png",	"aru (107).png",	"aru (108).png",	"aru (109).png",	"aru (110).png",	"aru (111).png",	"aru (112).png",	"aru (113).png",	"aru (114).png",	"aru (115).png",	"aru (116).png",	"aru (117).png",	"aru (118).png",	"aru (119).png",	"aru (120).png",	"aru (121).png",	"aru (122).png",	"aru (123).png",	"aru (124).png",	"aru (125).png",	"aru (126).png",	"aru (127).png",	"aru (128).png",	"aru (129).png",	"aru (130).png",	"aru (131).png",	"aru (132).png",	"aru (133).png",	"aru (134).png",	"aru (135).png",	"aru (136).png",	"aru (137).png",	"aru (138).png",	"aru (139).png",	"aru (140).png",	"aru (141).png",	"aru (142).png",	"aru (143).png",	"aru (144).png",	"aru (145).png",	"aru (146).png",	"aru (147).png",	"aru (148).png",	"aru (149).png",	"aru (150).png",	"aru (151).png",	"aru (152).png",	"aru (153).png",	"aru (154).png",	"aru (155).png",	"aru (156).png",	"aru (157).png",	"aru (158).png",	"aru (159).png",	"aru (160).png",	"aru (161).png",	"aru (162).png",	"aru (163).png",	"aru (164).png",	"baibai.png",	"beishang.png",	"bili_1.png",	"bili_2.png",	"bili_3.png",	"bili_4.png",	"bili_5.png",	"bili_6.png",	"bili_7.png",	"bili_8.png",	"bili_9.png",	"bili_10.png",	"bili_11.png",	"bili_12.png",	"bili_13.png",	"bili_14.png",	"bili_15.png",	"bili_16.png",	"bili_17.png",	"bili_18.png",	"bili_19.png",	"bili_20.png",	"bili_21.png",	"bili_22.png",	"bili_23.png",	"bili_24.png",	"bili_25.png",	"bili_26.png",	"bili_27.png",	"bili_28.png",	"bili_29.png",	"bili_30.png",	"bili_31.png",	"bili_32.png",	"bili_33.png",	"bili_34.png",	"bili_35.png",	"bili_36.png",	"bili_37.png",	"bili_38.png",	"bili_39.png",	"bili_40.png",	"bili_41.png",	"bili_42.png",	"bili_43.png",	"bili_44.png",	"bili_45.png",	"bili_46.png",	"bili_47.png",	"bili_48.png",	"bili_49.png",	"bili_50.png",	"bishi.png",	"bizui.png",	"chanzui.png",	"chijing.png",	"dahaqi.png",	"dalian.png",	"ding.png",	"dog1.png",	"dog2.png",	"dog3.png",	"dog4.png",	"dog5.png",	"dog6.png",	"dog7.png",	"dog8.png",	"dog9.png",	"dog10.png",	"dog11.png",	"dog12.png",	"dog13.png",	"dog14.png",	"dog15.png",	"doge.png",	"erha.png",	"feizao.png",	"ganmao.png",	"geili.png",	"guzhang.png",	"haha.png",	"haixiu.png",	"hehe.png",	"heixian.png",	"heng.png",	"huaxin.png",	"hufen.png",	"jiong.png",	"jiyan.png",	"keai.png",	"kelian.png",	"ku.png",	"kun.png",	"landelini.png",	"lei.png",	"meng.png",	"miao.png",	"nanhaier.png",	"nu.png",	"numa.png",	"nvhaier.png",	"OK.png",	"qian.png",	"qinqin.png",	"qq-1.gif",	"qq-2.gif",	"qq-3.gif",	"qq-4.gif",	"qq-5.gif",	"qq-6.gif",	"qq-7.gif",	"qq-8.gif",	"qq-9.gif",	"qq-10.gif",	"qq-11.gif",	"qq-12.gif",	"qq-13.gif",	"qq-14.gif",	"qq-15.gif",	"qq-16.gif",	"qq-17.gif",	"qq-18.gif",	"qq-19.gif",	"qq-20.gif",	"qq-21.gif",	"qq-22.gif",	"qq-23.gif",	"qq-24.gif",	"qq-25.gif",	"qq-26.gif",	"qq-27.gif",	"qq-28.gif",	"qq-29.gif",	"qq-30.gif",	"qq-31.gif",	"qq-32.gif",	"qq-33.gif",	"qq-34.gif",	"qq-35.gif",	"qq-36.gif",	"qq-37.gif",	"qq-38.gif",	"qq-39.gif",	"qq-40.gif",	"qq-41.gif",	"qq-42.gif",	"qq-43.gif",	"qq-44.gif",	"qq-45.gif",	"qq-46.gif",	"qq-47.gif",	"qq-48.gif",	"qq-49.gif",	"qq-50.gif",	"qq-51.gif",	"qq-52.gif",	"qq-53.gif",	"qq-54.gif",	"qq-55.gif",	"qq-56.gif",	"qq-57.gif",	"qq-58.gif",	"qq-59.gif",	"qq-60.gif",	"qq-61.gif",	"qq-62.gif",	"qq-63.gif",	"qq-64.gif",	"qq-65.gif",	"qq-66.gif",	"qq-67.gif",	"qq-68.gif",	"qq-69.gif",	"qq-70.gif",	"qq-71.gif",	"qq-72.gif",	"qq-73.gif",	"qq-74.gif",	"qq-75.gif",	"qq-76.gif",	"qq-77.gif",	"qq-78.gif",	"qq-79.gif",	"qq-80.gif",	"qq-81.gif",	"qq-82.gif",	"qq-83.gif",	"qq-84.gif",	"qq-85.gif",	"qq-86.gif",	"qq-87.gif",	"qq-88.gif",	"qq-89.gif",	"qq-90.gif",	"qq-91.gif",	"qq-92.gif",	"qq-93.gif",	"qq-94.gif",	"qq-95.gif",	"qq-96.gif",	"qq-97.gif",	"qq-98.gif",	"qq-99.gif",	"qq-100.gif",	"qq-101.gif",	"qq-102.gif",	"qq-103.gif",	"qq-104.gif",	"qq-105.gif",	"qq-106.gif",	"qq-107.gif",	"qq-108.gif",	"qq-109.gif",	"qq-110.gif",	"qq-111.gif",	"qq-112.gif",	"qq-113.gif",	"qq-114.gif",	"qq-115.gif",	"qq-116.gif",	"qq-117.gif",	"qq-118.gif",	"qq-119.gif",	"qq-120.gif",	"qq-121.gif",	"qq-122.gif",	"qq-123.gif",	"qq-124.gif",	"qq-125.gif",	"qq-126.gif",	"qq-127.gif",	"qq-128.gif",	"qq-129.gif",	"qq-130.gif",	"qq-131.gif",	"qq-132.gif",	"qq-133.gif",	"qq-134.gif",	"qq-135.gif",	"qq-136.gif",	"qq-137.gif",	"qq-138.gif",	"qq-139.gif",	"qq-140.gif",	"shayan.png",	"shengbing.png",	"shenma.png",	"shenshou.png",	"shiwang.png",	"shuai.png",	"shuijiao.png",	"sikao.png",	"sina_1.png",	"sina_2.png",	"sina_3.png",	"sina_4.png",	"sina_5.png",	"sina_6.png",	"sina_7.png",	"sina_8.png",	"sina_9.png",	"sina_10.png",	"sina_11.png",	"sina_12.png",	"sina_13.png",	"sina_14.png",	"sina_15.png",	"sina_16.png",	"sina_17.png",	"sina_18.png",	"sina_19.png",	"sina_20.png",	"sina_21.png",	"sina_22.png",	"sina_23.png",	"sina_24.png",	"sina_25.png",	"sina_26.png",	"sina_27.png",	"sina_28.png",	"sina_29.png",	"sina_30.png",	"sina_31.png",	"sina_32.png",	"sina_33.png",	"sina_34.png",	"sina_35.png",	"sina_36.png",	"sina_37.png",	"sina_38.png",	"sina_39.png",	"sina_40.png",	"sina_41.png",	"sina_42.png",	"sina_43.png",	"sina_44.png",	"sina_45.png",	"taikaixin.png",	"tieba-1.png",	"tieba-2.png",	"tieba-3.png",	"tieba-4.png",	"tieba-5.png",	"tieba-6.png",	"tieba-7.png",	"tieba-8.png",	"tieba-9.png",	"tieba-10.png",	"tieba-11.png",	"tieba-12.png",	"tieba-13.png",	"tieba-14.png",	"tieba-15.png",	"tieba-16.png",	"tieba-17.png",	"tieba-18.png",	"tieba-19.png",	"tieba-20.png",	"tieba-21.png",	"tieba-22.png",	"tieba-23.png",	"tieba-24.png",	"tieba-25.png",	"tieba-26.png",	"tieba-27.png",	"tieba-28.png",	"tieba-29.png",	"tieba-30.png",	"tieba-31.png",	"tieba-32.png",	"tieba-33.png",	"tieba-34.png",	"tieba-35.png",	"tieba-36.png",	"tieba-37.png",	"tieba-38.png",	"tieba-39.png",	"tieba-40.png",	"tieba-41.png",	"tieba-42.png",	"tieba-43.png",	"tieba-44.png",	"touxiao.png",	"tu.png",	"tuzi.png",	"v5.png",	"wabishi.png",	"weiqu.png",	"what.png",	"xi.png",	"xiaoku.png",	"xiongmao.png",	"xixi.png",	"xu.png",	"yinxian.png",	"yiwen.png",	"youhengheng.png",	"yun.png",	"zhi.png",	"zhuakuang.png",	"zhutou.png",	"zuiyou.png",	"zuohengheng.png",	"不高兴.png",	"乖.png",	"你懂的.png",	"便便.png",	"勉强.png",	"吐.png",	"吐舌.png",	"呀咩爹.png",	"呵呵.png",	"哈哈.png",	"啊.png",	"喷.png",	"大拇指.png",	"太开心.png",	"太阳.png",	"委屈.png",	"小乖.png",	"小红脸.png",	"彩虹.png",	"心碎.png",	"怒.png",	"惊哭.png",	"惊讶.png",	"懒得理.png",	"手纸.png",	"挖鼻.png",	"捂嘴笑.png",	"星星月亮.png",	"汗.png",	"沙发.png",	"泪.png",	"滑稽.png",	"灯泡.png",	"爱心.png",	"犀利.png",	"狂汗.png",	"玫瑰.png",	"疑问.png",	"真棒.png",	"睡觉.png",	"礼物.png",	"笑尿.png",	"笑眼.png",	"红领巾.png",	"胜利.png",	"花心.png",	"茶杯.png",	"药丸.png",	"蛋糕.png",	"蜡烛.png",	"鄙视.png",	"酷.png",	"酸爽.png",	"钱币.png",	"阴险.png",	"音乐.png",	"香蕉.png",	"黑线.png"],
        placeholder: 'Just go go',
  });

  <!--点击邮件中的链接跳转至相应评论-->
  if(window.location.hash){
      var checkExist = setInterval(function() {
         if ($(window.location.hash).length) {
            $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
            clearInterval(checkExist);
         }
      }, 100);
   }
  </script>

  <script type="text/javascript" src="/js/src/image.js"></script>



<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

</body>
</html>
