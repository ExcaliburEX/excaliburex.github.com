<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
 <script type="text/javascript" src="/js/src/linkcard.js"></script>
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/head.jpg?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/head.jpg?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/head.jpg?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">
  <meta name="google-site-verification" content="ELbK6WK_Oi8CisIxzYbp86oWSo2__-8MbVOmWyGpgRI">
  <meta name="baidu-site-verification" content="xwPujxAXwa">

<link rel="stylesheet" href="/css/main9.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Noto Serif SC Black:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.css">
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css?v=1.0.2">





<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":true},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    save_scroll: true,
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: './public/search.xml',
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>



  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "be6d4aef"
    });
  daovoice('update');
  </script>

  <meta name="description" content="学妹的请求，小试牛刀，一种尝试。">
<meta name="keywords" content="MATLAB,遗传算法,数学建模,地铁线路优化,目标函数,约束条件,二进制">
<meta property="og:type" content="article">
<meta property="og:title" content="地铁大小交路优化模型的遗传算法求解">
<meta property="og:url" content="https://kemo.xyz/地铁大小交路优化模型的遗传算法求解.html">
<meta property="og:site_name" content="柯摩的BLOG">
<meta property="og:description" content="学妹的请求，小试牛刀，一种尝试。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020051300111441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200513001301994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200513001308221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200513011016570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200513011005955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
<meta property="og:updated_time" content="2020-05-12T19:25:58.748Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="地铁大小交路优化模型的遗传算法求解">
<meta name="twitter:description" content="学妹的请求，小试牛刀，一种尝试。">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/2020051300111441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center">
  <link rel="alternate" href="/atom.xml" title="柯摩的BLOG" type="application/atom+xml">
  <link rel="canonical" href="https://kemo.xyz/地铁大小交路优化模型的遗传算法求解">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>地铁大小交路优化模型的遗传算法求解 | 柯摩的BLOG</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145155839-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-145155839-1');
    }
  </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?43fd6fab7512d8897b8d9cf67c49b600";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">柯摩的BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">Forget before get.</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">84</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">8</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">23</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-运动日记">
      
    
      
    

    <a href="/sports/" rel="section"><i class="menu-item-icon fa fa-fw fa-heart"></i> <br>运动日记</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-相册">
      
    
      
    

    <a href="/photos/" rel="section"><i class="menu-item-icon fa fa-fw fa-photo"></i> <br>相册</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-热门">
      
    
      
    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-fire"></i> <br>热门</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-友链">
      
    
      
    

    <a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-users"></i> <br>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

    

    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>


    </div>
</nav>

<!-- 打字礼花及震动特效 -->
<script type="text/javascript" src="https://blog-1259799643.cos.ap-shanghai.myqcloud.com/fire.js"></script>
<script>
  POWERMODE.colorful = true; // ture 为启用礼花特效
  POWERMODE.shake = true; // false 为禁用震动特效
  document.body.addEventListener('input', POWERMODE);
</script>
</div>
    </header>

    

  <a href="https://github.com/ExcaliburEX" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    
    <div class="reading-progress-bar"></div>



  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  

  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kemo.xyz/地铁大小交路优化模型的遗传算法求解.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柯摩">
      <meta itemprop="description" content="真实自有万钧之力">
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="柯摩的BLOG">
    </span>
      <header class="post-header">

        
          <h2 class="post-title" itemprop="name headline">地铁大小交路优化模型的遗传算法求解

            
          </h2>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-05-13 03:02:10 / 修改时间：03:25:58" itemprop="dateCreated datePublished" datetime="2020-05-13T03:02:10+08:00">2020-05-13</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            <span id="/地铁大小交路优化模型的遗传算法求解.html" class="post-meta-item leancloud_visitors" data-flag-title="地铁大小交路优化模型的遗传算法求解" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
          
            <span class="post-meta-item" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
            <span class="post-meta-divider">|</span>
          <span title="post.wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span>字数： 1.1k</span>
          
            
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="fa fa-comment-o"></i>
    </span>
    <span class="post-meta-item-text">评论数：</span>
  
    <a href="/地铁大小交路优化模型的遗传算法求解.html#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/地铁大小交路优化模型的遗传算法求解.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
          
          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span>1.8k</span>
            </span>
          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span>2 分钟</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>学妹的请求，小试牛刀，一种尝试。<br><a id="more"></a></p>
<h1 id="1️⃣-问题陈述"><a href="#1️⃣-问题陈述" class="headerlink" title="1️⃣ 问题陈述"></a>1️⃣ 问题陈述</h1><h2 id="1️⃣-1️⃣-需要解决的问题"><a href="#1️⃣-1️⃣-需要解决的问题" class="headerlink" title="1️⃣.1️⃣ 需要解决的问题"></a>1️⃣.1️⃣ 需要解决的问题</h2><p>  目前地铁一般采用如下的<strong>单一交路</strong><br>：<img src="https://img-blog.csdnimg.cn/2020051300111441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述">目前，我国绝大多数城市都采用这种交路形式，但是当断面客流量分布不均匀时容易造成线路运能浪费，客流拥挤。</p>
<p>替代方案就是用<strong>大小交路</strong>：<br><img src="https://img-blog.csdnimg.cn/20200513001301994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200513001308221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>使用遗传算法程序就是在既定的OD矩阵下找到最优的大小交路的往返站$S_a,S_b$以及相应的大小交路的发车频率$f_1,f_2$，也就是在遗传算法每次运行中，根据不同的大小交路折返站的设置，划分预定的OD出行矩阵，然后计算目标函数，判断是否达到最优。</p>
<h2 id="1️⃣-2️⃣-变量定义"><a href="#1️⃣-2️⃣-变量定义" class="headerlink" title="1️⃣.2️⃣ 变量定义"></a>1️⃣.2️⃣ 变量定义</h2><ul>
<li>$Q_1$——出行$O$点或$D$点位于小交路覆盖区段外出行以及$OD$均位于小交路覆盖区段外的客流量，人；</li>
<li>$Q_2$——出行$OD$位于小交路覆盖区段的客流量，人；</li>
<li>$t_{1d}、t_{2d}$——$Q_1、Q_2$对应乘客的平均候车时间，$s$;</li>
<li>$q_{od}$——在车站$o$上车，在车站$d$下车的客流量，人；</li>
<li>$i$——列车交路的集合，$i=\{1,2\}$，$1$代表大交路，$2$代表小交路；</li>
<li>$f_i$——大小交路运行方式下的交路i的发车频率，对/小时；</li>
<li>$f$——单一交路运行方式下的发车频率，对/小时；</li>
<li>$f_{min}$——最小发车频率，设置为$12$对/小时；</li>
<li>$T_{1周}、T_{2周}$——大小交路列车周转时间，$s$;</li>
<li>$t_{运,j}$——列车在区间$j$的纯运行时间，$s$；</li>
<li>$t_{停,j}$——列车在车站$h$的停站时间，$s$，设置为$30s$；</li>
<li>$t_{折}$——列车在终点站、中间站的最小折返间隔时间，$s$，设置为$120s$;</li>
<li>$C_z$——列车定员，即标准载客人数，人，设置为$1460$；</li>
<li>$\alpha$——列车满载率上限，设置为100%；</li>
<li>$I_o$——列车最小追踪间隔，$s$，设置为$120s$;<h2 id="1️⃣-3️⃣-目标函数"><a href="#1️⃣-3️⃣-目标函数" class="headerlink" title="1️⃣.3️⃣ 目标函数"></a>1️⃣.3️⃣ 目标函数</h2><script type="math/tex; mode=display">\min _{Z}=Q_{1} \cdot t_{1 d}+Q_{2} \cdot t_{2 d}</script>其中<script type="math/tex; mode=display">Q_{1}=\sum_{d=1}^{n} \sum_{o=1}^{n} q_{o d}-Q_{2}\\Q_{2=} \sum_{d=o+1}^{b} \sum_{o=a}^{b-1} q_{o, d}+\sum_{d=a}^{o-1} \sum_{o=a+1}^{b} q_{o, d}</script><script type="math/tex; mode=display">t_{2 d}=\frac{1}{2} \cdot \frac{60}{f_{1}+f_{2}}\\ \\t_{1 d}=\frac{1}{2} \cdot \frac{60}{f}</script></li>
</ul>
<h2 id="1️⃣-4️⃣-约束条件"><a href="#1️⃣-4️⃣-约束条件" class="headerlink" title="1️⃣.4️⃣ 约束条件"></a>1️⃣.4️⃣ 约束条件</h2><ul>
<li><p>列车数量</p>
<script type="math/tex; mode=display">\left[\frac{T_{\text {周1}}}{60} \cdot f_{1}\right]+\left[\frac{T_{\text {周} 2}}{60} \cdot f_{2}\right] \leq\left[\frac{T_{\text {周} 1}}{60} \cdot f\right]</script><p>其中</p>
<script type="math/tex; mode=display">T_{\text {周} 1}=2 \cdot\left(\sum_{j=1}^{n-1} t_{\text {运}},_{j}+\sum_{h=1}^{n} t_{\text {停, } h}+\sum t_{\text {折}}\right)\\T_{\text {周} 2}=2 \cdot\left(\sum_{j=a}^{b-1} t_{\text {运}},_{j}+\sum_{h=a}^{b} t_{\text {停, } h}+\sum t^{'}_{\text {折}}\right)</script></li>
<li><p>满载率约束</p>
<script type="math/tex; mode=display">\max _{j}\left(\sum_{d=j+1}^{n} \sum_{o=1}^{j} q_{o d} / \sum_{i=1}^{2} f_{i} \cdot \sum_{d=1}^{j} \sum_{o=j+1}^{n} q_{o d} / \sum_{i=1}^{2} f_{i}\right) \leq \alpha \cdot C_z</script></li>
<li><p>满足最小追踪间隔</p>
<script type="math/tex; mode=display">f_{1}+f_{2} \leq \frac{3600}{I_{0}}</script></li>
<li><p>折返站折返能力</p>
<script type="math/tex; mode=display">f_1\le\frac{3600}{t_{折}}\\f_2\le\frac{3600}{t_折}</script></li>
<li><p>满足最小发车频率</p>
<script type="math/tex; mode=display">f_1>=f_{min}</script></li>
<li><p>其他约束</p>
<script type="math/tex; mode=display">f_i\in N\\ 1\le a<b\le n</script></li>
</ul>
<h1 id="2️⃣-MATLAB程序"><a href="#2️⃣-MATLAB程序" class="headerlink" title="2️⃣ MATLAB程序"></a>2️⃣ <code>MATLAB</code>程序</h1><p>所有的程序以及数据，OD出行矩阵以及区间运行时间在：<a href="https://github.com/ExcaliburEX/Graduation-Design-and-MATLAB-Code-/tree/master/%E5%88%97%E8%BD%A6%E4%BA%A4%E8%B7%AF%E6%96%B9%E6%A1%88%E4%BC%98%E5%8C%96%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E7%A8%8B%E5%BA%8F" target="_blank" rel="noopener">列车交路方案优化遗传算法程序</a></p>
<h2 id="2️⃣-1️⃣-myself-m——主脚本"><a href="#2️⃣-1️⃣-myself-m——主脚本" class="headerlink" title="2️⃣.1️⃣ myself.m——主脚本"></a>2️⃣.1️⃣ <code>myself.m</code>——主脚本</h2><p>主脚本，<code>OD</code>矩阵可以使用<code>od.m</code>脚本随机生成。<br></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">clear;clc;close all;</span><br><span class="line"></span><br><span class="line">%% 生成随机OD矩阵</span><br><span class="line">%od()</span><br><span class="line"></span><br><span class="line">%%遗传参数设置</span><br><span class="line">NUMPOP=<span class="number">200</span>;%初始种群大小</span><br><span class="line">irange_l=<span class="number">1</span>; %问题解区间</span><br><span class="line">irange_r=<span class="number">35</span>; </span><br><span class="line">LENGTH=<span class="number">24</span>; %二进制编码长度</span><br><span class="line">ITERATION = <span class="number">10000</span>;%迭代次数</span><br><span class="line">CROSSOVERRATE = <span class="number">0.8</span>;%杂交率</span><br><span class="line">SELECTRATE = <span class="number">0.4</span>;%选择率</span><br><span class="line">VARIATIONRATE = <span class="number">0.2</span>;%变异率</span><br><span class="line">OD = xlsread(<span class="string">'OD.xlsx'</span>);% 苏州地铁<span class="number">2</span>号线调查问卷OD出行矩阵</span><br><span class="line">h = xlsread(<span class="string">'区间运行时间.xlsx'</span>); % 苏州地铁<span class="number">2</span>号线区间长度及运行时分</span><br><span class="line"></span><br><span class="line">%初始化种群</span><br><span class="line">pop=m_InitPop(NUMPOP,irange_l,irange_r);</span><br><span class="line">pop_save=pop;</span><br><span class="line">fitness_concat = [];</span><br><span class="line">best_solution = [];</span><br><span class="line">%开始迭代</span><br><span class="line"><span class="keyword">for</span> time=<span class="number">1</span>:ITERATION</span><br><span class="line">    %计算初始种群的适应度</span><br><span class="line">    fitness=m_Fitness(pop, OD, h);</span><br><span class="line">    fitness_concat = [fitness_concat;max(fitness)];</span><br><span class="line">    pop_T = pop<span class="string">';</span></span><br><span class="line"><span class="string">    [m,index] = max(m_Fitness(pop, OD, h));</span></span><br><span class="line"><span class="string">   best_solution = [best_solution;pop(:,index)'</span>];</span><br><span class="line">    %选择</span><br><span class="line">    pop=m_Select(fitness,pop,SELECTRATE);</span><br><span class="line">    %编码</span><br><span class="line">    binpop=m_Coding(pop,LENGTH,irange_l);</span><br><span class="line">    %交叉</span><br><span class="line">    kidsPop = crossover(binpop,NUMPOP,CROSSOVERRATE);</span><br><span class="line">    %变异</span><br><span class="line">    kidsPop = Variation(kidsPop,VARIATIONRATE);</span><br><span class="line">    %解码</span><br><span class="line">    kidsPop=m_Incoding(kidsPop,irange_l);</span><br><span class="line">    %更新种群</span><br><span class="line">    pop=[pop kidsPop];</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">disp([<span class="string">'最优解：'</span> num2str(min(m_Fx(pop,OD))) <span class="string">'分钟'</span>]);</span><br><span class="line">disp([<span class="string">'最优解对应的各参数：'</span> num2str(pop(<span class="number">1</span>,<span class="number">1</span>)) <span class="string">','</span> num2str(pop(<span class="number">2</span>,<span class="number">1</span>)) <span class="string">','</span> num2str(pop(<span class="number">3</span>,<span class="number">1</span>)) <span class="string">','</span> num2str(pop(<span class="number">4</span>,<span class="number">1</span>)) ]);</span><br><span class="line">disp([<span class="string">'最大适应度：'</span> num2str(max(m_Fitness(pop, OD, h)))]);   </span><br><span class="line">    </span><br><span class="line">figure</span><br><span class="line">% set(gca,<span class="string">'looseInset'</span>,[<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]);</span><br><span class="line">set(gcf,<span class="string">'outerposition'</span>,get(<span class="number">0</span>,<span class="string">'screensize'</span>));</span><br><span class="line">loglog(<span class="number">1</span>:ITERATION, fitness_concat, <span class="string">'Blue*-'</span>,<span class="string">'linewidth'</span>,<span class="number">2</span>)</span><br><span class="line">legend(<span class="string">'{\bf最优适应度值}'</span>);</span><br><span class="line">xlabel(<span class="string">'{\bf进化代数}'</span>,<span class="string">'fontsize'</span>,<span class="number">30</span>);</span><br><span class="line">ylabel(<span class="string">'{\bf最优适应度}'</span>,<span class="string">'fontsize'</span>,<span class="number">30</span>);</span><br><span class="line">set(gca,<span class="string">'FontSize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'Times New Roman'</span>);</span><br><span class="line">set(get(gca,<span class="string">'XLabel'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'YLabel'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'legend'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'title'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(gca,<span class="string">'linewidth'</span>,<span class="number">2</span>); </span><br><span class="line">print(gcf,<span class="string">'-dpng'</span>,<span class="string">'-r300'</span>,<span class="string">'最优适应度值-进化代数'</span>);</span><br><span class="line"></span><br><span class="line">figure</span><br><span class="line">% set(gca,<span class="string">'looseInset'</span>,[<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]);</span><br><span class="line">set(gcf,<span class="string">'outerposition'</span>,get(<span class="number">0</span>,<span class="string">'screensize'</span>));</span><br><span class="line">semilogx(<span class="number">1</span> : ITERATION, best_solution,<span class="string">'linewidth'</span>,<span class="number">4</span>)</span><br><span class="line">legend(<span class="string">'{\bf大小交路折返站a}'</span>,<span class="string">'{\bf大小交路折返站b}'</span>,<span class="string">'{\bf大交路发车频率f_1}'</span>,<span class="string">'{\bf小交路发车频率f_2}'</span>);</span><br><span class="line">% text(<span class="number">6</span>, <span class="number">0.3</span>, <span class="string">'$\leftarrow  y= 2^{-x}$'</span>, <span class="string">'HorizontalAlignment'</span>, <span class="string">'left'</span>, <span class="string">'Interpreter'</span>, <span class="string">'latex'</span>, <span class="string">'FontSize'</span>, <span class="number">15</span>);</span><br><span class="line">xlabel(<span class="string">'{\bf进化代数}'</span>,<span class="string">'fontsize'</span>,<span class="number">15</span>);</span><br><span class="line">ylabel(<span class="string">'{\bf参数各代最优值}'</span>,<span class="string">'fontsize'</span>,<span class="number">15</span>);</span><br><span class="line">set(gca,<span class="string">'FontSize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'Times New Roman'</span>);</span><br><span class="line">set(get(gca,<span class="string">'XLabel'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'YLabel'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'legend'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(get(gca,<span class="string">'title'</span>),<span class="string">'Fontsize'</span>,<span class="number">20</span>,<span class="string">'Fontname'</span>, <span class="string">'宋体'</span>);</span><br><span class="line">set(gca,<span class="string">'linewidth'</span>,<span class="number">2</span>); </span><br><span class="line">print(gcf,<span class="string">'-dpng'</span>,<span class="string">'-r300'</span>,<span class="string">'参数各代最优值-进化代数'</span>);</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="2️⃣-2️⃣-od-m——生成随机出行OD矩阵"><a href="#2️⃣-2️⃣-od-m——生成随机出行OD矩阵" class="headerlink" title="2️⃣.2️⃣ od.m——生成随机出行OD矩阵"></a>2️⃣.2️⃣ <code>od.m</code>——生成随机出行<code>OD</code>矩阵</h2><p>用来生成随机出行<code>OD</code>矩阵。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Mu = <span class="number">26</span>;</span><br><span class="line">sigma = <span class="number">10</span>;</span><br><span class="line">N = round(normrnd(Mu, sigma, [<span class="number">35</span> <span class="number">35</span>]));</span><br><span class="line">N = N + abs(min(N));</span><br><span class="line">sum(sum(N))</span><br><span class="line"><span class="keyword">if</span> sum(sum(N)) > <span class="number">35000</span> ;</span><br><span class="line">    <span class="keyword">if</span> sum(sum(N)) < <span class="number">40000</span>;</span><br><span class="line">        xlswrite(<span class="string">'test.xlsx'</span>,N,<span class="string">'Sheet1'</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-3️⃣-m-InitPop-m——初始化种群"><a href="#2️⃣-3️⃣-m-InitPop-m——初始化种群" class="headerlink" title="2️⃣.3️⃣ m_InitPop.m——初始化种群"></a>2️⃣.3️⃣ <code>m_InitPop.m</code>——初始化种群</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function pop=m_InitPop(numpop,irange_l,irange_r)</span><br><span class="line">%% 初始化种群</span><br><span class="line">%  输入：numpop--种群大小；</span><br><span class="line">%       [irange_l,irange_r]--初始种群所在的区间</span><br><span class="line">pop=[];</span><br><span class="line"><span class="keyword">for</span> j = <span class="number">1</span>:numpop</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>:<span class="number">4</span></span><br><span class="line">        % 因为a,b,f1,f2要求整数，所以生成随机整数</span><br><span class="line">        pop(i,j)= round(irange_l+(irange_r-irange_l)*rand);</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-4️⃣-m-Select-m——选择"><a href="#2️⃣-4️⃣-m-Select-m——选择" class="headerlink" title="2️⃣.4️⃣ m_Select.m——选择"></a>2️⃣.4️⃣ <code>m_Select.m</code>——选择</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function parentPop=m_Select(matrixFitness,pop,SELECTRATE)</span><br><span class="line">%% 选择</span><br><span class="line">% 输入：matrixFitness--适应度矩阵</span><br><span class="line">%      pop--初始种群</span><br><span class="line">%      SELECTRATE--选择率</span><br><span class="line"></span><br><span class="line">sumFitness=sum(matrixFitness(:));%计算所有种群的适应度</span><br><span class="line"></span><br><span class="line">accP=cumsum(matrixFitness/sumFitness);%累积概率</span><br><span class="line">%轮盘赌选择算法</span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:round(SELECTRATE*size(pop,<span class="number">2</span>))</span><br><span class="line">    matrix=find(accP>rand); %找到比随机数大的累积概率</span><br><span class="line">    <span class="keyword">if</span> isempty(matrix)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    end</span><br><span class="line">    parentPop(:,n)=pop(:,matrix(<span class="number">1</span>));%将首个比随机数大的累积概率的位置的个体遗传下去</span><br><span class="line">end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-5️⃣-Crossover-m——交叉"><a href="#2️⃣-5️⃣-Crossover-m——交叉" class="headerlink" title="2️⃣.5️⃣ Crossover.m——交叉"></a>2️⃣.5️⃣ <code>Crossover.m</code>——交叉</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">%% 子函数</span><br><span class="line">%</span><br><span class="line">%题  目：Crossover</span><br><span class="line">%</span><br><span class="line">%%</span><br><span class="line">%输   入：</span><br><span class="line">%           parentsPop       上一代种群</span><br><span class="line">%           NUMPOP           种群大小</span><br><span class="line">%           CROSSOVERRATE    交叉率</span><br><span class="line">%输   出：</span><br><span class="line">%           kidsPop          下一代种群</span><br><span class="line">%</span><br><span class="line">%% </span><br><span class="line">function kidsPop = Crossover(parentsPop,NUMPOP,CROSSOVERRATE)</span><br><span class="line">kidsPop = {[]};n = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> size(kidsPop,<span class="number">2</span>)<NUMPOP-size(parentsPop,<span class="number">2</span>)</span><br><span class="line">    %选择出交叉的父代和母代</span><br><span class="line">    father = parentsPop{<span class="number">1</span>,ceil((size(parentsPop,<span class="number">2</span>)<span class="number">-1</span>)*rand)+<span class="number">1</span>};</span><br><span class="line">    mother = parentsPop{<span class="number">1</span>,ceil((size(parentsPop,<span class="number">2</span>)<span class="number">-1</span>)*rand)+<span class="number">1</span>};</span><br><span class="line">    %随机产生交叉位置</span><br><span class="line">    crossLocation = ceil((length(father)<span class="number">-1</span>)*rand)+<span class="number">1</span>;</span><br><span class="line">    %如果随即数比交叉率低，就杂交</span><br><span class="line">    <span class="keyword">if</span> rand<CROSSOVERRATE</span><br><span class="line">        father(<span class="number">1</span>,crossLocation:end) = mother(<span class="number">1</span>,crossLocation:end);</span><br><span class="line">        kidsPop{n} = father;</span><br><span class="line">        n = n+<span class="number">1</span>;</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-6️⃣-Variation-m——变异"><a href="#2️⃣-6️⃣-Variation-m——变异" class="headerlink" title="2️⃣.6️⃣ Variation.m——变异"></a>2️⃣.6️⃣ <code>Variation.m</code>——变异</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">%% 子函数</span><br><span class="line">%</span><br><span class="line">%题  目：Variation</span><br><span class="line">%</span><br><span class="line">%</span><br><span class="line">%输   入：</span><br><span class="line">%           pop              种群</span><br><span class="line">%           VARIATIONRATE    变异率</span><br><span class="line">%输   出：</span><br><span class="line">%           pop              变异后的种群</span><br><span class="line">%% </span><br><span class="line">function kidsPop = Variation(kidsPop,VARIATIONRATE)</span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:size(kidsPop,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> rand<VARIATIONRATE</span><br><span class="line">        temp = kidsPop{n};</span><br><span class="line">        %找到变异位置</span><br><span class="line">        location = ceil(length(temp)*rand);</span><br><span class="line">        temp = [temp(<span class="number">1</span>:location<span class="number">-1</span>) num2str(~temp(location))...</span><br><span class="line">            temp(location+<span class="number">1</span>:end)];</span><br><span class="line">       kidsPop{n} = temp;</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-7️⃣-m-Coding-m——编码"><a href="#2️⃣-7️⃣-m-Coding-m——编码" class="headerlink" title="2️⃣.7️⃣ m_Coding.m——编码"></a>2️⃣.7️⃣ <code>m_Coding.m</code>——编码</h2><p>因为总共$35$座车站，$a,b,f_1,f_2$都不超过$35<2^6$，所以$4$个参数都设置为$6$位二进制，这样编码总长度为$24$。 </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function binPop=m_Coding(pop,pop_length,irange_l)</span><br><span class="line">%% 二进制编码（生成染色体）</span><br><span class="line">% 输入：pop--种群</span><br><span class="line">%      pop_length--编码长度</span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:size(pop,<span class="number">2</span>) %列循环</span><br><span class="line">    binPop{n} = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span> k=<span class="number">1</span>:size(pop,<span class="number">1</span>) %行循环</span><br><span class="line">        substr = dec2bin(pop(k,n));</span><br><span class="line">        lengthpop = length(substr);</span><br><span class="line">        <span class="keyword">for</span> s = <span class="number">1</span>:<span class="number">6</span>-lengthpop</span><br><span class="line">            substr = [<span class="string">'0'</span> substr];</span><br><span class="line">        end</span><br><span class="line">        binPop{n} = [binPop{n} substr];</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table><!--2^6$，所以$4$个参数都设置为$6$位二进制，这样编码总长度为$24$。--><p></p>
<h2 id="2️⃣-8️⃣-m-Incoding-m——解码"><a href="#2️⃣-8️⃣-m-Incoding-m——解码" class="headerlink" title="2️⃣.8️⃣ m_Incoding.m——解码"></a>2️⃣.8️⃣ <code>m_Incoding.m</code>——解码</h2><p>解码时编码长度为$24$，每隔$6$位转化成十进制。<br></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function pop=m_Incoding(binPop,irange_l)</span><br><span class="line">%% 解码</span><br><span class="line">popNum=<span class="number">1</span>;</span><br><span class="line">popNum = <span class="number">4</span>;%染色体包含的参数数量</span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:size(binPop,<span class="number">2</span>)</span><br><span class="line">    % 因为有<span class="number">35</span>个车站，<span class="number">35</span><<span class="number">2</span>^<span class="number">6</span> ，所以编码为<span class="number">6</span>位</span><br><span class="line">    pop(<span class="number">1</span>,n) = bin2dec(binPop{<span class="number">1</span>,n}(<span class="number">1</span>:<span class="number">6</span>)); </span><br><span class="line">    pop(<span class="number">2</span>,n) = bin2dec(binPop{<span class="number">1</span>,n}(<span class="number">7</span>:<span class="number">12</span>));</span><br><span class="line">    pop(<span class="number">3</span>,n) = bin2dec(binPop{<span class="number">1</span>,n}(<span class="number">13</span>:<span class="number">18</span>));</span><br><span class="line">    pop(<span class="number">4</span>,n) = bin2dec(binPop{<span class="number">1</span>,n}(<span class="number">19</span>:<span class="number">24</span>));</span><br><span class="line">end</span><br><span class="line">% pop = pop./<span class="number">10</span>^<span class="number">6</span>+irange_l;</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="2️⃣-9️⃣-m-Fitness-m——适应度函数-重要，实现约束条件"><a href="#2️⃣-9️⃣-m-Fitness-m——适应度函数-重要，实现约束条件" class="headerlink" title="2️⃣.9️⃣ m_Fitness.m——适应度函数(重要，实现约束条件)"></a>2️⃣.9️⃣ <code>m_Fitness.m</code>——适应度函数(重要，实现约束条件)</h2><p>在这里实现约束条件，思路就是不满足约束条件的种群的适应度设置为无穷小，那么在下一代的迭代中就会将适应度低的种群淘汰掉，实现约束的目的。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">function fitness=m_Fitness(pop, OD, h)</span><br><span class="line">%% Fitness Function</span><br><span class="line"><span class="keyword">for</span> n=<span class="number">1</span>:size(pop,<span class="number">2</span>)</span><br><span class="line">    a = pop(<span class="number">1</span>,n);</span><br><span class="line">    b = pop(<span class="number">2</span>,n);</span><br><span class="line">    f1 = pop(<span class="number">3</span>,n);</span><br><span class="line">    f2 = pop(<span class="number">4</span>,n);</span><br><span class="line">%% 约束条件，不满足约束则适应度值无穷小    </span><br><span class="line"> %% <span class="number">1</span>) a,b,f1,f2 不能为<span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">0</span> || b == <span class="number">0</span> || f1 == <span class="number">0</span> || f2 == <span class="number">0</span></span><br><span class="line">        fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    end</span><br><span class="line"> %% <span class="number">2</span>) a,b,f1,f2 不能超过<span class="number">35</span></span><br><span class="line">    <span class="keyword">if</span> a > <span class="number">35</span> || b > <span class="number">35</span> || f1 ><span class="number">35</span> || f2 ><span class="number">35</span> </span><br><span class="line">         fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    end</span><br><span class="line">%% <span class="number">3</span>) 列车数量约束</span><br><span class="line">     <span class="keyword">if</span> (sum(h) * <span class="number">120</span> + <span class="number">1170</span>) *( f1 - <span class="number">16</span>) + (sum(h(a: b<span class="number">-1</span>)) + (b - a + <span class="number">1</span>) * <span class="number">30</span> + <span class="number">120</span>) * f2 > <span class="number">0</span></span><br><span class="line">        fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">     end</span><br><span class="line">%% <span class="number">4</span>) 满载率约束   </span><br><span class="line">%     constraint2 = [];</span><br><span class="line">%     <span class="keyword">for</span> j = <span class="number">2</span>:<span class="number">33</span></span><br><span class="line">%         constraint2(j) = (sum(sum(OD(<span class="number">1</span>:j, j+<span class="number">1</span>:<span class="number">35</span>)))/(f1+f2)) * (sum(sum(OD(j+<span class="number">1</span>:<span class="number">35</span>,<span class="number">1</span>:j)))/(f1+f2));</span><br><span class="line">%     end</span><br><span class="line">%     <span class="keyword">if</span> max(constraint2) > <span class="number">1</span> * <span class="number">1460</span></span><br><span class="line">%         fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">%         <span class="keyword">continue</span>;</span><br><span class="line">%     end</span><br><span class="line">%% <span class="number">5</span>) 最小追踪间隔     </span><br><span class="line">    <span class="keyword">if</span> f1 + f2 > <span class="number">30</span></span><br><span class="line">        fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    end </span><br><span class="line">%% <span class="number">5</span>) 最小发车间隔   </span><br><span class="line">    <span class="keyword">if</span> f1 < <span class="number">12</span></span><br><span class="line">          fitness(n) = <span class="number">1</span>/<span class="number">1000000000</span>;</span><br><span class="line">           <span class="keyword">continue</span>;</span><br><span class="line">    end</span><br><span class="line">%% 主要适应度函数，设置为目标函数的倒数，即目标函数要求最小，那么越小，适应度就越大    </span><br><span class="line">    fitness(n)= <span class="number">1</span>/m_Fx(pop(:,n), OD);</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2️⃣-🔟-m-Fx-m——目标函数-重要"><a href="#2️⃣-🔟-m-Fx-m——目标函数-重要" class="headerlink" title="2️⃣.🔟 m_Fx.m——目标函数(重要)"></a>2️⃣.🔟 <code>m_Fx.m</code>——目标函数(重要)</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function y=m_Fx(x, OD)</span><br><span class="line">%% 要求解的函数</span><br><span class="line">%% Z = Q1 * t1d + Q2 * t2d</span><br><span class="line">    y = (sum(sum(OD)) - sum(sum(OD(x(<span class="number">1</span>):x(<span class="number">2</span>),x(<span class="number">1</span>):x(<span class="number">2</span>))))) * (<span class="number">30</span>/x(<span class="number">3</span>)) + sum(sum(OD(x(<span class="number">1</span>):x(<span class="number">2</span>),x(<span class="number">1</span>):x(<span class="number">2</span>)))) * (<span class="number">30</span>/(x(<span class="number">3</span>)+x(<span class="number">4</span>)));</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h1 id="3️⃣-运行结果"><a href="#3️⃣-运行结果" class="headerlink" title="3️⃣ 运行结果"></a>3️⃣ 运行结果</h1><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">最优解：<span class="number">71335.4762</span>分钟</span><br><span class="line">最优解对应的各参数：<span class="number">4</span>,<span class="number">32</span>,<span class="number">14</span>,<span class="number">4</span></span><br><span class="line">最大适应度：<span class="number">1.4018e-05</span></span><br></pre></td></tr></tbody></table></figure>
<p>即设置第$4$和第$32$个站点为大小交路折返站，大交路发车频率为$14$列/小时，小交路发车频率为$4$列/小时，最低平均等待时间为$71335$分钟。</p>
<p>图像结果：<br><img src="https://img-blog.csdnimg.cn/20200513011016570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200513011005955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
</figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>
      


    
    
    
     
     
  



    
      <div>
        <div id="reward-container">
  <div>喜欢就支持一下吧~</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
        
      
      <div style="display: inline-block">
        <img src="/images/微信.jpg" alt="柯摩 微信支付">
        <p>微信支付</p>
      </div>
        
      
      <div style="display: inline-block">
        <img src="/images/支付宝.jpg" alt="柯摩 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

      </div>
      <div>
        

<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>柯摩</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://kemo.xyz/地铁大小交路优化模型的遗传算法求解.html" title="地铁大小交路优化模型的遗传算法求解">https://kemo.xyz/地铁大小交路优化模型的遗传算法求解.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>

    <footer class="post-footer">
          
        
        <div class="post-tags">
            <a href="/tags/MATLAB/" rel="tag"><i class="fa fa-tag"></i> MATLAB</a>
          
            <a href="/tags/遗传算法/" rel="tag"><i class="fa fa-tag"></i> 遗传算法</a>
          
            <a href="/tags/数学建模/" rel="tag"><i class="fa fa-tag"></i> 数学建模</a>
          
            <a href="/tags/地铁线路优化/" rel="tag"><i class="fa fa-tag"></i> 地铁线路优化</a>
          
            <a href="/tags/目标函数/" rel="tag"><i class="fa fa-tag"></i> 目标函数</a>
          
            <a href="/tags/约束条件/" rel="tag"><i class="fa fa-tag"></i> 约束条件</a>
          
            <a href="/tags/二进制/" rel="tag"><i class="fa fa-tag"></i> 二进制</a>
          
        </div>
        <div class="post-widgets">
        
        
          <div class="wp_rating">
          
            <div id="wpac-rating"></div>
          </div>
        

        

        
          <div class="social-share">
            
              


<div class="likely">
    <div class="twitter">Tweet</div>
    <div class="facebook">Share</div>
    <div class="linkedin">Link</div>
    <div class="gplus">Plus</div>
    <div class="vkontakte">Share</div>
    <div class="odnoklassniki">Class</div>
    <div class="telegram">Send</div>
    <div class="whatsapp">Send</div>
    <div class="pinterest">Pin</div>
</div>
<script src="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.js"></script>


            
            
              <div id="needsharebutton-postbottom">
                <span class="btn">
                  <i class="fa fa-share-alt" aria-hidden="true"></i>
                </span>
              </div>
            
          </div>
        
        </div>
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/简单地打造一个搜索工具-爬取所有网页并创造单词的反向索引.html" rel="next" title="简单地打造一个搜索工具--爬取所有网页并创造单词的反向索引">
                <i class="fa fa-chevron-left"></i> 简单地打造一个搜索工具--爬取所有网页并创造单词的反向索引
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>
<div>

  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:16px;">-------------   本 文 结 束 <i class="fa fa-heart"></i> 感 谢 您 的 阅 读    -------------</div>
    
</div>
  
</div>
 




    <script type="text/javascript" src="/js/src/linkcard.js"></script>
  </div>
<script type="text/javascript" src="/js/src/linkcard.js"></script>

          </div>
          
    
    <div class="comments" id="comments"></div>
  


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/head.jpg"
      alt="柯摩">
  <p class="site-author-name" itemprop="name">柯摩</p>
  <div class="site-description motion-element" itemprop="description">真实自有万钧之力</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/ExcaliburEX" title="GitHub &rarr; https://github.com/ExcaliburEX" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:912011727@qq.com" title="E-Mail &rarr; mailto:912011727@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://weibo.com/u/5339619827" title="Weibo &rarr; https://weibo.com/u/5339619827" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://user.qzone.qq.com/912011727" title="QQ &rarr; https://user.qzone.qq.com/912011727" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QQ</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://blog-1259799643.cos.ap-shanghai.myqcloud.com/wechat-qcode.jpg" title="Wechat &rarr; https://blog-1259799643.cos.ap-shanghai.myqcloud.com/wechat-qcode.jpg" rel="noopener" target="_blank"><i class="fa fa-fw fa-weixin"></i>Wechat</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://twitter.com/Excaliburjp" title="Twitter &rarr; https://twitter.com/Excaliburjp" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://space.bilibili.com/2142109" title="Bilibili &rarr; https://space.bilibili.com/2142109" rel="noopener" target="_blank"><i class="fa fa-fw fa-mobile"></i>Bilibili</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1️⃣-问题陈述"><span class="nav-number">1.</span> <span class="nav-text">1️⃣ 问题陈述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1️⃣-1️⃣-需要解决的问题"><span class="nav-number">1.1.</span> <span class="nav-text">1️⃣.1️⃣ 需要解决的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1️⃣-2️⃣-变量定义"><span class="nav-number">1.2.</span> <span class="nav-text">1️⃣.2️⃣ 变量定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1️⃣-3️⃣-目标函数"><span class="nav-number">1.3.</span> <span class="nav-text">1️⃣.3️⃣ 目标函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1️⃣-4️⃣-约束条件"><span class="nav-number">1.4.</span> <span class="nav-text">1️⃣.4️⃣ 约束条件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2️⃣-MATLAB程序"><span class="nav-number">2.</span> <span class="nav-text">2️⃣ MATLAB程序</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-1️⃣-myself-m——主脚本"><span class="nav-number">2.1.</span> <span class="nav-text">2️⃣.1️⃣ myself.m——主脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-2️⃣-od-m——生成随机出行OD矩阵"><span class="nav-number">2.2.</span> <span class="nav-text">2️⃣.2️⃣ od.m——生成随机出行OD矩阵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-3️⃣-m-InitPop-m——初始化种群"><span class="nav-number">2.3.</span> <span class="nav-text">2️⃣.3️⃣ m_InitPop.m——初始化种群</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-4️⃣-m-Select-m——选择"><span class="nav-number">2.4.</span> <span class="nav-text">2️⃣.4️⃣ m_Select.m——选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-5️⃣-Crossover-m——交叉"><span class="nav-number">2.5.</span> <span class="nav-text">2️⃣.5️⃣ Crossover.m——交叉</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-6️⃣-Variation-m——变异"><span class="nav-number">2.6.</span> <span class="nav-text">2️⃣.6️⃣ Variation.m——变异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-7️⃣-m-Coding-m——编码"><span class="nav-number">2.7.</span> <span class="nav-text">2️⃣.7️⃣ m_Coding.m——编码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-8️⃣-m-Incoding-m——解码"><span class="nav-number">2.8.</span> <span class="nav-text">2️⃣.8️⃣ m_Incoding.m——解码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-9️⃣-m-Fitness-m——适应度函数-重要，实现约束条件"><span class="nav-number">2.9.</span> <span class="nav-text">2️⃣.9️⃣ m_Fitness.m——适应度函数(重要，实现约束条件)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2️⃣-🔟-m-Fx-m——目标函数-重要"><span class="nav-number">2.10.</span> <span class="nav-text">2️⃣.🔟 m_Fx.m——目标函数(重要)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3️⃣-运行结果"><span class="nav-number">3.</span> <span class="nav-text">3️⃣ 运行结果</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

  
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Barrier/">Barrier</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BeautifulSoup/">BeautifulSoup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BoxPlot/">BoxPlot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataMining/">DataMining</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Editor/">Editor</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IQR/">IQR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Job/">Job</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jupyter/">Jupyter</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lasso正则化/">Lasso正则化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Learning/">Learning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LightGBM/">LightGBM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Regression/">Linear Regression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MATLAB/">MATLAB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navie-Bayes/">Navie Bayes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Next/">Next</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OJ/">OJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Onehot/">Onehot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ridge正则化/">Ridge正则化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Science-Uranology/">Science Uranology</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Selenium/">Selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study/">Study</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thinking/">Thinking</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tianchi/">Tianchi</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XGBoost/">XGBoost</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alive-progress/">alive_progress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cross-validation/">cross validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/custom/">custom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/distributed-system/">distributed system</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/groupby/">groupby</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matplotlib/">matplotlib</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multithreading/">multithreading</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandas/">pandas</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests/">requests</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seaborn/">seaborn</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svm/">svm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二进制/">二进制</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/五折交叉验证/">五折交叉验证</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存优化/">内存优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策树/">决策树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式计算/">分布式计算</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/包裹式-wrapper/">包裹式(wrapper)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/反向索引/">反向索引</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/回忆/">回忆</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地铁线路优化/">地铁线路优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多层感知机-MLP/">多层感知机(MLP)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式（embedding）/">嵌入式（embedding）</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感情/">感情</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插值/">插值</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学建模/">数学建模</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日记/">日记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/朋友圈/">朋友圈</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/朴素贝叶斯/">朴素贝叶斯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/极坐标/">极坐标</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梯度提升树-GBDT/">梯度提升树(GBDT)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则表达式/">正则表达式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正态分布/">正态分布</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毕业论文/">毕业论文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/气象图/">气象图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/温馨/">温馨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/热力图/">热力图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/画图/">画图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目标函数/">目标函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/真挚/">真挚</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/约束条件/">约束条件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网格调参/">网格调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/节点通信/">节点通信</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调查问卷/">调查问卷</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贝叶斯调参/">贝叶斯调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心调参/">贪心调参</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/过滤式-filter/">过滤式(filter)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/遗传算法/">遗传算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/问卷星/">问卷星</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随机森林/">随机森林</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a><span class="tag-list-count">2</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">柯摩</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">142k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">2:09</span>
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">全站共 66.6k 字</span>
</div>

<div class="run_time" style=" text-align:center;">
  <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
  <script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("08/06/2019 00:00:00");//此处修改你的建站时间或者网站上线时间 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
    setInterval("createtime()",250);
  </script>

<div class="BbeiAn-info">
  皖ICP备 -
    <a target="_blank" href="http://www.miitbeian.gov.cn/" style="color:#f0d784"  rel="nofollow">19020907</a> <!--a标签中增加nofollow属性，避免爬虫出站。-->| 
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32050802011200" style="color:#f0d784;text-decoration:none;padding-left:30px;background:url(https://s1.ax1x.com/2018/09/29/ilmwIH.png) no-repeat left center" rel="nofollow">苏公网安备 32050802011200号</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      总访客量 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      总访客数 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
  
</div>




  <script>
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=66458571";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
  
  <div id="needsharebutton-float">
    <span class="btn">
      <i class="fa fa-share-alt" aria-hidden="true"></i>
    </span>
  </div>
<script src="/lib/needsharebutton/needsharebutton.js"></script>
<script>
    pbOptions = {};
      pbOptions.iconStyle = "box";
    
      pbOptions.boxForm = "horizontal";
    
      pbOptions.position = "bottomCenter";
    
      pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
    
    new needShareButton('#needsharebutton-postbottom', pbOptions);
    flOptions = {};
      flOptions.iconStyle = "box";
    
      flOptions.boxForm = "horizontal";
    
      flOptions.position = "middleRight";
    
      flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
    
    new needShareButton('#needsharebutton-float', flOptions);
</script>


  </div>

  
    
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>
  <script src="/lib/reading_progress/reading_progress.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>






  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>
  
  <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>




  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script>
  if (CONFIG.page.isPost) {
    bookmark.scrollToMark('auto', "#更多");
  } else {
    bookmark.loadBookmark();
  }
  </script>










  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: 20167,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>



  <script src="/js/local-search.js?v=7.3.0"></script>








<script>
function embedPDF() {
  $('body').find('div.pdf').each(function(i, o) {
    PDFObject.embed($(o).attr('target'), $(o), {
      pdfOpenParams: {
        navpanes: 0,
        toolbar: 0,
        statusbar: 0,
        pagemode: 'thumbs',
        view: 'FitH'
      },
      PDFJS_URL: '/lib/pdf/web/viewer.html',
      height: $(o).attr('height') || '500px'
    });
  });
}
if ($('body').find('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', embedPDF, window.PDFObject);
}
</script>






  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>

  <script type="text/javascript" src="/js/src/linkcard.js"></script>

    

  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="https://site-1258928558.cos.ap-guangzhou.myqcloud.com/js/Valine.min.js"></script>

  <!--<script src="//unpkg.com/valine/dist/Valine.min.js"></script>-->
  <!-- https://deserts.io/diy-a-comment-system/ -->
  <script type="text/javascript">
    new Valine({
        lang: 'zh-cn',
        admin_email: '912011727@qq.com', //博主邮箱
        el: '#comments' ,
        appId: 'u4vO2zGHJKiMhlMhYbgBgq1E-gzGzoHsz',
        appKey: 'XRdJWVzmRfYF0uw6oUQztM7B',
        emoticon_url: 'https://cdn.jsdelivr.net/gh/ExcaliburEX/blog_file@master/emojis/',
        emoticon_list: ["aini.png",	"aoteman.png",	"aru (1).png",	"aru (2).png",	"aru (3).png",	"aru (4).png",	"aru (5).png",	"aru (6).png",	"aru (7).png",	"aru (8).png",	"aru (9).png",	"aru (10).png",	"aru (11).png",	"aru (12).png",	"aru (13).png",	"aru (14).png",	"aru (15).png",	"aru (16).png",	"aru (17).png",	"aru (18).png",	"aru (19).png",	"aru (20).png",	"aru (21).png",	"aru (22).png",	"aru (23).png",	"aru (24).png",	"aru (25).png",	"aru (26).png",	"aru (27).png",	"aru (28).png",	"aru (29).png",	"aru (30).png",	"aru (31).png",	"aru (32).png",	"aru (33).png",	"aru (34).png",	"aru (35).png",	"aru (36).png",	"aru (37).png",	"aru (38).png",	"aru (39).png",	"aru (40).png",	"aru (41).png",	"aru (42).png",	"aru (43).png",	"aru (44).png",	"aru (45).png",	"aru (46).png",	"aru (47).png",	"aru (48).png",	"aru (49).png",	"aru (50).png",	"aru (51).png",	"aru (52).png",	"aru (53).png",	"aru (54).png",	"aru (55).png",	"aru (56).png",	"aru (57).png",	"aru (58).png",	"aru (59).png",	"aru (60).png",	"aru (61).png",	"aru (62).png",	"aru (63).png",	"aru (64).png",	"aru (65).png",	"aru (66).png",	"aru (67).png",	"aru (68).png",	"aru (69).png",	"aru (70).png",	"aru (71).png",	"aru (72).png",	"aru (73).png",	"aru (74).png",	"aru (75).png",	"aru (76).png",	"aru (77).png",	"aru (78).png",	"aru (79).png",	"aru (80).png",	"aru (81).png",	"aru (82).png",	"aru (83).png",	"aru (84).png",	"aru (85).png",	"aru (86).png",	"aru (87).png",	"aru (88).png",	"aru (89).png",	"aru (90).png",	"aru (91).png",	"aru (92).png",	"aru (93).png",	"aru (94).png",	"aru (95).png",	"aru (96).png",	"aru (97).png",	"aru (98).png",	"aru (99).png",	"aru (100).png",	"aru (101).png",	"aru (102).png",	"aru (103).png",	"aru (104).png",	"aru (105).png",	"aru (106).png",	"aru (107).png",	"aru (108).png",	"aru (109).png",	"aru (110).png",	"aru (111).png",	"aru (112).png",	"aru (113).png",	"aru (114).png",	"aru (115).png",	"aru (116).png",	"aru (117).png",	"aru (118).png",	"aru (119).png",	"aru (120).png",	"aru (121).png",	"aru (122).png",	"aru (123).png",	"aru (124).png",	"aru (125).png",	"aru (126).png",	"aru (127).png",	"aru (128).png",	"aru (129).png",	"aru (130).png",	"aru (131).png",	"aru (132).png",	"aru (133).png",	"aru (134).png",	"aru (135).png",	"aru (136).png",	"aru (137).png",	"aru (138).png",	"aru (139).png",	"aru (140).png",	"aru (141).png",	"aru (142).png",	"aru (143).png",	"aru (144).png",	"aru (145).png",	"aru (146).png",	"aru (147).png",	"aru (148).png",	"aru (149).png",	"aru (150).png",	"aru (151).png",	"aru (152).png",	"aru (153).png",	"aru (154).png",	"aru (155).png",	"aru (156).png",	"aru (157).png",	"aru (158).png",	"aru (159).png",	"aru (160).png",	"aru (161).png",	"aru (162).png",	"aru (163).png",	"aru (164).png",	"baibai.png",	"beishang.png",	"bili_1.png",	"bili_2.png",	"bili_3.png",	"bili_4.png",	"bili_5.png",	"bili_6.png",	"bili_7.png",	"bili_8.png",	"bili_9.png",	"bili_10.png",	"bili_11.png",	"bili_12.png",	"bili_13.png",	"bili_14.png",	"bili_15.png",	"bili_16.png",	"bili_17.png",	"bili_18.png",	"bili_19.png",	"bili_20.png",	"bili_21.png",	"bili_22.png",	"bili_23.png",	"bili_24.png",	"bili_25.png",	"bili_26.png",	"bili_27.png",	"bili_28.png",	"bili_29.png",	"bili_30.png",	"bili_31.png",	"bili_32.png",	"bili_33.png",	"bili_34.png",	"bili_35.png",	"bili_36.png",	"bili_37.png",	"bili_38.png",	"bili_39.png",	"bili_40.png",	"bili_41.png",	"bili_42.png",	"bili_43.png",	"bili_44.png",	"bili_45.png",	"bili_46.png",	"bili_47.png",	"bili_48.png",	"bili_49.png",	"bili_50.png",	"bishi.png",	"bizui.png",	"chanzui.png",	"chijing.png",	"dahaqi.png",	"dalian.png",	"ding.png",	"dog1.png",	"dog2.png",	"dog3.png",	"dog4.png",	"dog5.png",	"dog6.png",	"dog7.png",	"dog8.png",	"dog9.png",	"dog10.png",	"dog11.png",	"dog12.png",	"dog13.png",	"dog14.png",	"dog15.png",	"doge.png",	"erha.png",	"feizao.png",	"ganmao.png",	"geili.png",	"guzhang.png",	"haha.png",	"haixiu.png",	"hehe.png",	"heixian.png",	"heng.png",	"huaxin.png",	"hufen.png",	"jiong.png",	"jiyan.png",	"keai.png",	"kelian.png",	"ku.png",	"kun.png",	"landelini.png",	"lei.png",	"meng.png",	"miao.png",	"nanhaier.png",	"nu.png",	"numa.png",	"nvhaier.png",	"OK.png",	"qian.png",	"qinqin.png",	"qq-1.gif",	"qq-2.gif",	"qq-3.gif",	"qq-4.gif",	"qq-5.gif",	"qq-6.gif",	"qq-7.gif",	"qq-8.gif",	"qq-9.gif",	"qq-10.gif",	"qq-11.gif",	"qq-12.gif",	"qq-13.gif",	"qq-14.gif",	"qq-15.gif",	"qq-16.gif",	"qq-17.gif",	"qq-18.gif",	"qq-19.gif",	"qq-20.gif",	"qq-21.gif",	"qq-22.gif",	"qq-23.gif",	"qq-24.gif",	"qq-25.gif",	"qq-26.gif",	"qq-27.gif",	"qq-28.gif",	"qq-29.gif",	"qq-30.gif",	"qq-31.gif",	"qq-32.gif",	"qq-33.gif",	"qq-34.gif",	"qq-35.gif",	"qq-36.gif",	"qq-37.gif",	"qq-38.gif",	"qq-39.gif",	"qq-40.gif",	"qq-41.gif",	"qq-42.gif",	"qq-43.gif",	"qq-44.gif",	"qq-45.gif",	"qq-46.gif",	"qq-47.gif",	"qq-48.gif",	"qq-49.gif",	"qq-50.gif",	"qq-51.gif",	"qq-52.gif",	"qq-53.gif",	"qq-54.gif",	"qq-55.gif",	"qq-56.gif",	"qq-57.gif",	"qq-58.gif",	"qq-59.gif",	"qq-60.gif",	"qq-61.gif",	"qq-62.gif",	"qq-63.gif",	"qq-64.gif",	"qq-65.gif",	"qq-66.gif",	"qq-67.gif",	"qq-68.gif",	"qq-69.gif",	"qq-70.gif",	"qq-71.gif",	"qq-72.gif",	"qq-73.gif",	"qq-74.gif",	"qq-75.gif",	"qq-76.gif",	"qq-77.gif",	"qq-78.gif",	"qq-79.gif",	"qq-80.gif",	"qq-81.gif",	"qq-82.gif",	"qq-83.gif",	"qq-84.gif",	"qq-85.gif",	"qq-86.gif",	"qq-87.gif",	"qq-88.gif",	"qq-89.gif",	"qq-90.gif",	"qq-91.gif",	"qq-92.gif",	"qq-93.gif",	"qq-94.gif",	"qq-95.gif",	"qq-96.gif",	"qq-97.gif",	"qq-98.gif",	"qq-99.gif",	"qq-100.gif",	"qq-101.gif",	"qq-102.gif",	"qq-103.gif",	"qq-104.gif",	"qq-105.gif",	"qq-106.gif",	"qq-107.gif",	"qq-108.gif",	"qq-109.gif",	"qq-110.gif",	"qq-111.gif",	"qq-112.gif",	"qq-113.gif",	"qq-114.gif",	"qq-115.gif",	"qq-116.gif",	"qq-117.gif",	"qq-118.gif",	"qq-119.gif",	"qq-120.gif",	"qq-121.gif",	"qq-122.gif",	"qq-123.gif",	"qq-124.gif",	"qq-125.gif",	"qq-126.gif",	"qq-127.gif",	"qq-128.gif",	"qq-129.gif",	"qq-130.gif",	"qq-131.gif",	"qq-132.gif",	"qq-133.gif",	"qq-134.gif",	"qq-135.gif",	"qq-136.gif",	"qq-137.gif",	"qq-138.gif",	"qq-139.gif",	"qq-140.gif",	"shayan.png",	"shengbing.png",	"shenma.png",	"shenshou.png",	"shiwang.png",	"shuai.png",	"shuijiao.png",	"sikao.png",	"sina_1.png",	"sina_2.png",	"sina_3.png",	"sina_4.png",	"sina_5.png",	"sina_6.png",	"sina_7.png",	"sina_8.png",	"sina_9.png",	"sina_10.png",	"sina_11.png",	"sina_12.png",	"sina_13.png",	"sina_14.png",	"sina_15.png",	"sina_16.png",	"sina_17.png",	"sina_18.png",	"sina_19.png",	"sina_20.png",	"sina_21.png",	"sina_22.png",	"sina_23.png",	"sina_24.png",	"sina_25.png",	"sina_26.png",	"sina_27.png",	"sina_28.png",	"sina_29.png",	"sina_30.png",	"sina_31.png",	"sina_32.png",	"sina_33.png",	"sina_34.png",	"sina_35.png",	"sina_36.png",	"sina_37.png",	"sina_38.png",	"sina_39.png",	"sina_40.png",	"sina_41.png",	"sina_42.png",	"sina_43.png",	"sina_44.png",	"sina_45.png",	"taikaixin.png",	"tieba-1.png",	"tieba-2.png",	"tieba-3.png",	"tieba-4.png",	"tieba-5.png",	"tieba-6.png",	"tieba-7.png",	"tieba-8.png",	"tieba-9.png",	"tieba-10.png",	"tieba-11.png",	"tieba-12.png",	"tieba-13.png",	"tieba-14.png",	"tieba-15.png",	"tieba-16.png",	"tieba-17.png",	"tieba-18.png",	"tieba-19.png",	"tieba-20.png",	"tieba-21.png",	"tieba-22.png",	"tieba-23.png",	"tieba-24.png",	"tieba-25.png",	"tieba-26.png",	"tieba-27.png",	"tieba-28.png",	"tieba-29.png",	"tieba-30.png",	"tieba-31.png",	"tieba-32.png",	"tieba-33.png",	"tieba-34.png",	"tieba-35.png",	"tieba-36.png",	"tieba-37.png",	"tieba-38.png",	"tieba-39.png",	"tieba-40.png",	"tieba-41.png",	"tieba-42.png",	"tieba-43.png",	"tieba-44.png",	"touxiao.png",	"tu.png",	"tuzi.png",	"v5.png",	"wabishi.png",	"weiqu.png",	"what.png",	"xi.png",	"xiaoku.png",	"xiongmao.png",	"xixi.png",	"xu.png",	"yinxian.png",	"yiwen.png",	"youhengheng.png",	"yun.png",	"zhi.png",	"zhuakuang.png",	"zhutou.png",	"zuiyou.png",	"zuohengheng.png",	"不高兴.png",	"乖.png",	"你懂的.png",	"便便.png",	"勉强.png",	"吐.png",	"吐舌.png",	"呀咩爹.png",	"呵呵.png",	"哈哈.png",	"啊.png",	"喷.png",	"大拇指.png",	"太开心.png",	"太阳.png",	"委屈.png",	"小乖.png",	"小红脸.png",	"彩虹.png",	"心碎.png",	"怒.png",	"惊哭.png",	"惊讶.png",	"懒得理.png",	"手纸.png",	"挖鼻.png",	"捂嘴笑.png",	"星星月亮.png",	"汗.png",	"沙发.png",	"泪.png",	"滑稽.png",	"灯泡.png",	"爱心.png",	"犀利.png",	"狂汗.png",	"玫瑰.png",	"疑问.png",	"真棒.png",	"睡觉.png",	"礼物.png",	"笑尿.png",	"笑眼.png",	"红领巾.png",	"胜利.png",	"花心.png",	"茶杯.png",	"药丸.png",	"蛋糕.png",	"蜡烛.png",	"鄙视.png",	"酷.png",	"酸爽.png",	"钱币.png",	"阴险.png",	"音乐.png",	"香蕉.png",	"黑线.png"],
        placeholder: 'Just go go',
  });

  <!--点击邮件中的链接跳转至相应评论-->
  if(window.location.hash){
      var checkExist = setInterval(function() {
         if ($(window.location.hash).length) {
            $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
            clearInterval(checkExist);
         }
      }, 100);
   }
  </script>

  <script type="text/javascript" src="/js/src/image.js"></script>



<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

</body>
</html>
